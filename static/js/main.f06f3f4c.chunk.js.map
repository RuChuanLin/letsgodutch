{"version":3,"sources":["firebase/init.js","firebase/index.js","utils/dbApiUnification.js","actions/recordAction.js","actions/userAction.js","utils/common.js","components/Modal.js","components/FormikWizard/Wizard.js","components/FormikWizard/StepsList.js","components/FormikWizard/Step.js","utils/colors.js","components/FormikWizard/Button.js","components/FormikWizard/ButtonsList.js","components/FormikWizard/PreviousButton.js","components/FormikWizard/NextButton.js","components/FormikWizard/SubmitButton.js","components/FormikWizard/index.js","containers/_common/CURDRecordModal/SelectParticipants.js","components/Input/Field.js","components/Text/index.js","components/Input/index.js","containers/_common/CURDRecordModal/RecordCost.js","containers/_common/CURDRecordModal/SelectPayer.js","containers/_common/CURDRecordModal/RecordOtherStuff.js","containers/_common/CURDRecordModal/ResultsPreview.js","containers/_common/CURDRecordModal/index.js","components/Popconfirm.js","components/IconButton/index.js","containers/DataTable/index.js","components/Button/index.js","containers/Panel/AddUserModal.js","containers/Panel/AddNewRecordModal.js","containers/Panel/index.js","App.js","reducers/recordReducer.js","reducers/userReducer.js","store.js","index.js"],"names":["urlSearchParams","URLSearchParams","window","location","search","configs","Object","fromEntries","entries","db","apiKey","authDomain","projectId","firebase","initializeApp","firestore","e","Localbase","getRecordDB","collection","getUserDB","snapshots2Docs","snapshots","docs","snapshot2Data","snapshot","data","getIdFromAddedObject","addedObject","key","RECORDS__LOAD_ALL_RECORD","RECORDS__ADD_RECORD","RECORDS__UPDATE_RECORD","RECORDS__REMOVE_RECORD","USER__LOAD_ALL_USERS","USER__ADD_USER","filterParticipants","memoIniObject","memoFinishedObject","memoIniOptionsObject","participantObject","options","filter","targeted","participant","every","value","genNewRecordObject","memoInitUsers","memoFinishedNewRecord","users","delivery","fee","discount","amount","participants","keys","reduce","acc","name","selected","cost","payer","fixNumber","number","fixDigit","nPowerOf10","Math","round","Number","EPSILON","StyledModal","styled","Modal","CustomModal","button","buttonTitle","okFunction","children","useState","isModalVisible","setIsModalVisible","showModal","cloneElement","onClick","type","style","marginRight","visible","onOk","onCancel","footer","centered","overflow","maxWidth","Children","map","child","getTotalSteps","reactChildren","React","toArray","displayName","props","length","Error","Wizard","onSubmit","activeStepIndex","totalSteps","stepTabs","direction","state","setState","onPreviousStep","produce","draftState","onNextStep","submitHandler","values","setValues","initialValues","draft","updateStepTabs","stepsComponent","buttonsListComponent","validators","forEach","getInitialComponents","Wrapper","div","StepsList","useEffect","title","push","formik","index","isActive","getStepChildren","getX","actionPara","Step","component","y","useTransition","enter","x","opacity","from","leave","transition","item","position","Title","level","primaryBackground","primaryBackgroundDark","chroma","darken","hex","primaryBackgroundLight","brighten","white","colors","mark","error","getGray","scale","WizardButton","show","label","validator","errorMsgs","call","tooltipVisible","setTooltipVisible","disabledNext","disabled","color","onVisibleChange","defaultProps","ButtonsList","RocketOutlined","PreviousButton","NextButton","SubmitButton","App","components","validatorFuncs","validate","func","c","filterObject","filterKey","participantChangeHandler","action","keySet","Set","obj","included","has","SelectParticipants","dataSource","titles","targetKeys","selectedKeys","onChange","nextTargetKeys","onSelectChange","sourceSelectedKeys","targetSelectedKeys","render","errors","StyledFastField","FastField","touched","fontSize","Field","StyledText","Typography","Text","size","width","InputItem","text","RecordCost","Input","handleChange","onBlur","handleBlur","placeholder","SelectPayer","Group","buttonStyle","target","Button","note","ResultsPreview","deliveryFee","discountAmount","filteredParticipants","totalAmount","participantCount","totalSharedFee","sharedFee","columns","dataIndex","strong","CrownTwoTone","twoToneColor","abs","Link","arrangeValues","scroll","pagination","summary","Summary","fixed","Row","Cell","RecordOtherStuff","FormikWizard","_Popconfirm","popconfirmTitle","onConfirm","setVisible","confirmLoading","setConfirmLoading","showPopconfirm","handleOk","a","okButtonProps","loading","StyledButton","IconButton","generateDataSource","events","dispatch","event","i","date","id","moment","format","placement","EditTwoTone","record","recordId","updatedRecord","doc","set","payload","Popconfirm","delete","DeleteTwoTone","generateTotalCostAmount","initValue","participantEntries","averageDeliveryFee","DataTable","useDispatch","records","useSelector","totalCostAmount","sort","b","generateColumns","pageSize","_Button","Option","Select","AddUserModal","userName","validationSchema","yup","shape","required","nameObject","valueOf","add","then","addUser","AddNewRecordModal","initNewRecord","console","log","CURDRecordModal","toCloud","newRecord","arrangedRecord","addNewRecord","Panel","display","height","alignItems","justifyContent","force","getState","orderBy","get","allRecords","fetchAllRecords","userObject","cur","fetchAllUsers","initialState","reducer","s","loggerMiddleware","createLogger","store","createStore","combineReducers","applyMiddleware","thunkMiddleware","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.f06f3f4c.chunk.js","sourcesContent":["import firebase from \"firebase\";\r\nimport Localbase from \"localbase\";\r\nimport \"firebase/database\";\r\n// import configs from \"./configs\";\r\n\r\nconst urlSearchParams = new URLSearchParams(window.location.search);\r\nconst configs = Object.fromEntries(urlSearchParams.entries());\r\n\r\nlet db = null;\r\nif (configs.apiKey && configs.authDomain && configs.projectId) {\r\n  try {\r\n    firebase.initializeApp(configs);\r\n    db = firebase.firestore();\r\n  } catch (e) {\r\n    db = new Localbase(\"db\");\r\n  }\r\n} else {\r\n  db = new Localbase(\"db\");\r\n}\r\n\r\nexport default db;\r\n","import firebase from \"./init\";\r\n\r\nexport const getRecordDB = () => firebase.collection(\"records\");\r\nexport const getUserDB = () => firebase.collection(\"users\");\r\n","export const snapshots2Docs = (snapshots) => (snapshots?.docs ? snapshots.docs : snapshots);\r\nexport const snapshot2Data = (snapshot) => {\r\n  if (snapshot?.data && typeof snapshot.data === \"function\") {\r\n    return snapshot.data();\r\n  }\r\n  return snapshot;\r\n};\r\n\r\nexport const getIdFromAddedObject = (addedObject) => {\r\n  if (typeof addedObject === \"string\") {\r\n    return addedObject;\r\n  }\r\n  return addedObject?.data?.key;\r\n};\r\n","import moment from \"moment\";\r\n\r\nimport { getRecordDB } from \"../firebase\";\r\nimport { snapshots2Docs, snapshot2Data, getIdFromAddedObject } from \"../utils/dbApiUnification\";\r\n\r\nexport const RECORDS__LOAD_ALL_RECORD = \"RECORDS__LOAD_ALL_RECORD\";\r\nexport const RECORDS__ADD_RECORD = \"RECORDS__ADD_RECORD\";\r\nexport const RECORDS__UPDATE_RECORD = \"RECORDS__UPDATE_RECORD\";\r\nexport const RECORDS__REMOVE_RECORD = \"RECORDS__REMOVE_RECORD\";\r\n\r\nexport const fetchAllRecords =\r\n  ({ force } = {}) =>\r\n  (dispatch, getState) => {\r\n    const { records } = getState();\r\n    if (records.length === 0 || force) {\r\n      getRecordDB()\r\n        .orderBy(\"date\", \"desc\")\r\n        .get()\r\n        .then((snapshots) => {\r\n          const docs = snapshots2Docs(snapshots);\r\n          const allRecords = docs.map((snapshot) => ({\r\n\r\n            ...snapshot2Data(snapshot),\r\n            id: snapshot.id,\r\n          }));\r\n          dispatch({ type: RECORDS__LOAD_ALL_RECORD, payload: allRecords });\r\n        });\r\n    } else {\r\n      dispatch({ type: RECORDS__LOAD_ALL_RECORD, payload: records });\r\n    }\r\n  };\r\n\r\nexport const addNewRecord =\r\n  ({ toCloud = true, newRecord }) =>\r\n  async (dispatch) => {\r\n    if (!newRecord) {\r\n      return;\r\n    }\r\n    const arrangedRecord = { ...newRecord, date: new moment().valueOf() };\r\n    if (toCloud) {\r\n      const addedObject = await getRecordDB().add(arrangedRecord);\r\n      const id = getIdFromAddedObject(addedObject);\r\n      dispatch({ type: RECORDS__ADD_RECORD, payload: { ...arrangedRecord, id } });\r\n    } else {\r\n      dispatch({ type: RECORDS__ADD_RECORD, payload: arrangedRecord });\r\n    }\r\n  };\r\n\r\nexport const updateRecord = (recordId, updatedRecord) => async (dispatch) => {\r\n  try {\r\n    await getRecordDB().doc(recordId).set(updatedRecord);\r\n    dispatch({ type: RECORDS__UPDATE_RECORD, payload: { recordId, updatedRecord } });\r\n  } catch (e) {}\r\n};\r\n\r\nexport const removeRecord = (recordId) => async (dispatch) => {\r\n  try {\r\n    await getRecordDB().doc(recordId).delete();\r\n\r\n    dispatch({ type: RECORDS__REMOVE_RECORD, payload: { recordId } });\r\n  } catch (e) {}\r\n};\r\n","import moment from \"moment\";\r\n\r\nimport { getUserDB } from \"../firebase\";\r\nimport { snapshots2Docs, snapshot2Data } from \"../utils/dbApiUnification\";\r\nexport const USER__LOAD_ALL_USERS = \"USER__LOAD_ALL_USERS\";\r\nexport const USER__ADD_USER = \"USER__ADD_USER\";\r\n\r\nexport const fetchAllUsers =\r\n  ({ force } = {}) =>\r\n  (dispatch, getState) => {\r\n    const { users = {} } = getState();\r\n    if (Object.keys(users).length === 0 || force) {\r\n      getUserDB()\r\n        .get()\r\n        .then((snapshots) => {\r\n          const docs = snapshots2Docs(snapshots);\r\n          const userObject = docs\r\n            .map(snapshot2Data)\r\n            .reduce((acc, cur) => ({ ...acc, [cur.name]: {} }), {});\r\n          dispatch({ type: USER__LOAD_ALL_USERS, payload: userObject });\r\n        });\r\n    }\r\n  };\r\n\r\nexport const addUser =\r\n  ({ userName } = {}) =>\r\n  (dispatch) => {\r\n    if (userName) {\r\n      const nameObject = {\r\n        name: userName,\r\n        date: new moment().valueOf(),\r\n      };\r\n      getUserDB()\r\n        .add(nameObject)\r\n        .then(() => {\r\n          dispatch({\r\n            type: USER__ADD_USER,\r\n            payload: { ...nameObject },\r\n          });\r\n        });\r\n    }\r\n  };\r\n","/**\r\n * filter participants\r\n *\r\n * this project requires to filter out untargete or unselected participants frequently, so we need a independant funtion to deal with it.\r\n *\r\n * note: this function use a memorization to minimize the amount of calculation.\r\n */\r\nconst filterParticipants = (() => {\r\n  let [memoIniObject, memoFinishedObject] = [null, null];\r\n  let [memoIniOptionsObject] = [null];\r\n  return (\r\n    participantObject,\r\n    options = {\r\n      filter: { targeted: true },\r\n    }\r\n  ) => {\r\n    if (participantObject === memoIniObject && memoIniOptionsObject === options) {\r\n      return memoFinishedObject;\r\n    }\r\n    memoIniObject = participantObject;\r\n    memoIniOptionsObject = options;\r\n    memoFinishedObject = Object.entries(participantObject).filter((participant) =>\r\n      Object.entries(options.filter).every(([key, value]) => participant?.[1]?.[key] === value)\r\n    );\r\n    return memoFinishedObject;\r\n  };\r\n})();\r\n\r\nexport const genNewRecordObject = (() => {\r\n  let [memoInitUsers, memoFinishedNewRecord] = [null, null];\r\n  return (users) => {\r\n    if (users !== memoInitUsers) {\r\n      memoInitUsers = users;\r\n      memoFinishedNewRecord = {\r\n        delivery: {\r\n          fee: 0,\r\n        },\r\n        discount: {\r\n          amount: 0,\r\n        },\r\n        participants: Object.keys(users).reduce(\r\n          (acc, name) => ({\r\n            ...acc,\r\n            [name]: { key: name, name, targeted: true, selected: false, cost: \"\" },\r\n          }),\r\n          {}\r\n        ),\r\n        payer: \"\",\r\n      };\r\n    }\r\n    return memoFinishedNewRecord;\r\n  };\r\n})();\r\n\r\nconst fixNumber = (number, options = {}) => {\r\n  const { fixDigit = 2 } = options;\r\n  const nPowerOf10 = 10 ** fixDigit;\r\n  return Math.round((number + Number.EPSILON) * nPowerOf10) / nPowerOf10;\r\n};\r\nexport { filterParticipants, fixNumber };\r\n","import React, { useState, Children, cloneElement } from \"react\";\r\nimport { Modal, Button } from \"antd\";\r\nimport styled from \"styled-components\";\r\n\r\nconst StyledModal = styled(Modal)`\r\n    &::-webkit-scrollbar {\r\n        display: none;\r\n    }\r\n`;\r\n\r\nconst CustomModal = ({\r\n    button,\r\n    buttonTitle = \"Open Modal\",\r\n    okFunction,\r\n    children,\r\n}) => {\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n\r\n  const showModal = () => {\r\n    setIsModalVisible(true);\r\n  };\r\n\r\n  const handleOk = () => {\r\n    okFunction();\r\n    setIsModalVisible(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setIsModalVisible(false);\r\n  };\r\n\r\n  const clonedChildren = () =>\r\n    Children.map(children, (child) =>\r\n      cloneElement(child, {\r\n        isModalVisible,\r\n        setIsModalVisible,\r\n      })\r\n    );\r\n\r\n  return (\r\n    <>\r\n      {button ? (\r\n        cloneElement(button, {\r\n          onClick: showModal,\r\n        })\r\n      ) : (\r\n        <Button type=\"primary\" onClick={showModal} style={{ marginRight: 12 }}>\r\n          {buttonTitle}\r\n        </Button>\r\n      )}\r\n            <StyledModal\r\n        visible={isModalVisible}\r\n        onOk={handleOk}\r\n        onCancel={handleCancel}\r\n        footer={null}\r\n        centered\r\n        style={{ overflow: \"auto\", maxWidth: \"448px\" }}\r\n      >\r\n        {clonedChildren()}\r\n            </StyledModal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CustomModal;\r\n","import React, { Children, cloneElement, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n// import StepTabs from \"./StepTabs\";\r\nimport { produce } from \"immer\";\r\n\r\nconst getTotalSteps = (children) => {\r\n  const reactChildren = React.Children.toArray(children);\r\n  for (const child of reactChildren) {\r\n    if (child.type.displayName === \"StepsList\") {\r\n      return child.props.children.length - 1;\r\n    }\r\n  }\r\n  throw new Error(\"Require StepsList\");\r\n};\r\n\r\nconst Wizard = ({ children, onSubmit, ...props }) => {\r\n  const [state, setState] = useState({\r\n    activeStepIndex: 0,\r\n    totalSteps: getTotalSteps(children),\r\n    stepTabs: [],\r\n    direction: 0,\r\n  });\r\n\r\n  const onPreviousStep = () =>\r\n    setState(\r\n      produce(state, (draftState) => {\r\n        draftState.activeStepIndex = state.activeStepIndex - 1;\r\n        draftState.direction = -1;\r\n      })\r\n    );\r\n\r\n  const onNextStep = () =>\r\n    setState(\r\n      produce(state, (draftState) => {\r\n        draftState.activeStepIndex = state.activeStepIndex + 1;\r\n        draftState.direction = 1;\r\n      })\r\n    );\r\n\r\n  const submitHandler = onSubmit\r\n    ? () => {\r\n        onSubmit(props.values);\r\n        props.setIsModalVisible(false);\r\n        props.setValues(props.initialValues);\r\n        setState(\r\n          produce(state, (draft) => {\r\n            draft.activeStepIndex = 0;\r\n            draft.direction = 0;\r\n          })\r\n        );\r\n      }\r\n    : () => {};\r\n\r\n  const updateStepTabs = (stepTabs) =>\r\n    setState(\r\n      produce(state, (draftState) => {\r\n        draftState.stepTabs = stepTabs;\r\n      })\r\n    );\r\n\r\n  const getInitialComponents = () => {\r\n    let stepsComponent = null;\r\n    let buttonsListComponent = null;\r\n    let validators = [];\r\n\r\n    Children.forEach(children, (child) => {\r\n      if (child.type.displayName === \"StepsList\") {\r\n        stepsComponent = cloneElement(child, {\r\n          activeStepIndex: state.activeStepIndex,\r\n          updateStepTabs: updateStepTabs,\r\n          direction: state.direction,\r\n          ...props,\r\n        });\r\n        if (child.props.validators) {\r\n          // eslint-disable-next-line prefer-destructuring\r\n          validators = child.props.validators;\r\n        }\r\n      }\r\n      if (child.type.displayName === \"ButtonsList\") {\r\n        buttonsListComponent = cloneElement(child, {\r\n          activeStepIndex: state.activeStepIndex,\r\n          totalSteps: state.totalSteps,\r\n          submitHandler,\r\n\r\n          onNextStep,\r\n          onPreviousStep,\r\n          validators,\r\n          ...props,\r\n        });\r\n      }\r\n    });\r\n    return { stepsComponent, buttonsListComponent };\r\n  };\r\n\r\n  const { stepsComponent, buttonsListComponent } = getInitialComponents();\r\n\r\n  return (\r\n    <div>\r\n      {/* <StepTabs tabs={state.stepTabs} activeStepIndex={state.activeStepIndex} /> */}\r\n      {stepsComponent}\r\n      {buttonsListComponent}\r\n    </div>\r\n  );\r\n};\r\n\r\nWizard.propTypes = {\r\n  className: PropTypes.string,\r\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\r\n};\r\n\r\nWizard.displayName = \"Wizard\";\r\n\r\nexport default Wizard;\r\n","import React, { Children, cloneElement, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst Wrapper = styled.div`\r\n  position: relative;\r\n  height: 344px;\r\n`;\r\n\r\nconst StepsList = (props) => {\r\n  useEffect(() => {\r\n    const stepTabs = [];\r\n    Children.forEach(props.children, (child) => {\r\n      if (child.props.title) {\r\n        stepTabs.push({ title: child.props.title });\r\n      }\r\n    });\r\n    props.updateStepTabs(stepTabs); \r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const getStepChildren = () => {\r\n    const { activeStepIndex, children, direction, ...formik } = props;\r\n    const stepTabs = [];\r\n    const newChildren = Children.map(children, (child, index) => {\r\n      if (child.props.title) {\r\n        stepTabs.push({ title: child.props.title });\r\n      }\r\n      return cloneElement(child, {\r\n        isActive: index === activeStepIndex,\r\n        formik,\r\n        direction,\r\n      });\r\n    });\r\n    return newChildren;\r\n  };\r\n\r\n  return <Wrapper>{getStepChildren()}</Wrapper>;\r\n};\r\n\r\nStepsList.propTypes = {\r\n  activeStepIndex: PropTypes.number,\r\n  updateStepTabs: PropTypes.func,\r\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\r\n};\r\n\r\nStepsList.displayName = \"StepsList\";\r\n\r\nexport default StepsList;\r\n","import PropTypes from \"prop-types\";\r\nimport { useTransition, animated } from \"react-spring\";\r\nimport { Typography } from \"antd\";\r\n\r\nconst getX = (direction, actionPara) => 300 * direction * actionPara;\r\n\r\nconst Step = ({ isActive, component, direction, ...props }) => {\r\n  const y = direction === 0 ? 50 : -20;\r\n  const transition = useTransition(isActive, {\r\n    enter: { x: 0, y: 0, opacity: 1 },\r\n    from: { x: getX(direction, 1), y, opacity: 0 },\r\n    leave: { x: getX(direction, -1), y, opacity: 0 },\r\n  });\r\n\r\n  return transition((style, item) =>\r\n    item ? (\r\n      <animated.div style={{ position: \"absolute\", ...style }}>\r\n        <Typography.Title level={3}>{component?.title}</Typography.Title>\r\n        {component(props)}\r\n      </animated.div>\r\n    ) : (\r\n      <></>\r\n    )\r\n  );\r\n};\r\n\r\nStep.propTypes = {\r\n  isActive: PropTypes.bool,\r\n  component: PropTypes.func,\r\n  direction: PropTypes.number,\r\n};\r\n\r\nStep.displayName = \"Step\";\r\n\r\nexport default Step;\r\n","import chroma from \"chroma-js\";\r\n\r\nconst primaryBackground = \"#1890ff\";\r\nconst primaryBackgroundDark = chroma(primaryBackground).darken(0.3).hex();\r\nconst primaryBackgroundLight = chroma(primaryBackground).brighten(0.4).hex();\r\nconst mark = \"#C7802D\";\r\nconst error = \"#f50\";\r\nconst white = \"#FFFFFB\";\r\nconst black = \"#080808\";\r\nconst getGray = (scale) => chroma.scale([white, black])(scale).hex();\r\n\r\nconst colors = {\r\n  primaryBackground,\r\n  primaryBackgroundDark,\r\n  primaryBackgroundLight,\r\n  mark,\r\n  error,\r\n  white,\r\n  getGray,\r\n};\r\n\r\nexport default colors;\r\n","import React, { useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Button, Tooltip } from \"antd\";\r\nimport colors from \"../../utils/colors\";\r\n\r\nconst WizardButton = ({ children, type, show, onClick, label, validator, ...props }) => {\r\n  const errorMsgs = (validator && validator.call(null)?.errorMsgs) || [];\r\n  const [tooltipVisible, setTooltipVisible] = useState(false);\r\n  const disabledNext = typeof validator === \"function\" && errorMsgs.length > 0;\r\n  return show ? (\r\n    children ? (\r\n      React.cloneElement(children, {\r\n        onClick: !validator || validator.call(null) ? onClick : null,\r\n        disabled: typeof validator === \"function\" && !validator.call(null),\r\n      })\r\n    ) : (\r\n      <Tooltip\r\n        title={errorMsgs && <span>{errorMsgs?.[0]}</span>}\r\n        color={colors.error}\r\n        visible={tooltipVisible}\r\n        onVisibleChange={(visible) => setTooltipVisible(visible && disabledNext)}\r\n      >\r\n        <Button\r\n          disabled={disabledNext}\r\n          type={type}\r\n          onClick={!validator || validator.call(null) ? onClick : null}\r\n          {...props}\r\n        >\r\n          {label || \"Next\"}\r\n        </Button>\r\n      </Tooltip>\r\n    )\r\n  ) : null;\r\n};\r\n\r\nWizardButton.defaultProps = {\r\n  type: \"button\",\r\n};\r\n\r\nWizardButton.propTypes = {\r\n  show: PropTypes.bool,\r\n  onClick: PropTypes.func,\r\n  label: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\r\n  validator: PropTypes.func,\r\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\r\n};\r\n\r\nWizardButton.displayName = \"WizardButton\";\r\n\r\nexport default WizardButton;\r\n","import React, { Children } from \"react\";\r\n\r\nimport { RocketOutlined } from \"@ant-design/icons\";\r\nimport styled from \"styled-components\";\r\nimport PropTypes from \"prop-types\";\r\nimport Button from \"./Button\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-top: 24px;\r\n`;\r\n\r\nconst ButtonsList = ({\r\n  activeStepIndex,\r\n  totalSteps,\r\n  onPreviousStep,\r\n  onNextStep,\r\n  onSubmit,\r\n  children,\r\n  validators,\r\n  ...formik\r\n}) => {  \r\n  return (\r\n    <Wrapper>\r\n      {Children.map(children, (child) => {\r\n        const validator = validators[activeStepIndex];\r\n        if (child.type.displayName === \"PreviousButton\") {\r\n          return (\r\n            <Button\r\n              type=\"link\"\r\n              show={activeStepIndex > 0}\r\n              onClick={onPreviousStep}\r\n              label=\"上一步\"\r\n              {...child.props}\r\n            />\r\n          );\r\n        }\r\n        if (child.type.displayName === \"NextButton\") {\r\n          return (\r\n            <Button\r\n              type=\"primary\"\r\n              show={activeStepIndex < totalSteps}\r\n              onClick={onNextStep}\r\n              validator={validator}\r\n              label=\"下一步\"\r\n              {...child.props}\r\n            />\r\n          );\r\n        }\r\n        if (child.type.displayName === \"SubmitButton\") {\r\n          return (\r\n            <Button\r\n              show={activeStepIndex === totalSteps}\r\n              onClick={formik.submitHandler}\r\n              validator={validator}\r\n              type=\"primary\"\r\n              label={\r\n                <span>\r\n                  <RocketOutlined /> 送出\r\n                </span>\r\n              }\r\n              {...child.props}\r\n            />\r\n          );\r\n        }\r\n        return child;\r\n      })}\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nButtonsList.propTypes = {\r\n  activeStepIndex: PropTypes.number,\r\n  totalSteps: PropTypes.number,\r\n  onPreviousStep: PropTypes.func,\r\n  onNextStep: PropTypes.func,\r\n  onSubmit: PropTypes.func,\r\n  validators: PropTypes.array,\r\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\r\n};\r\n\r\nButtonsList.displayName = \"ButtonsList\";\r\n\r\nexport default ButtonsList;\r\n","const PreviousButton = () => null;\r\n\r\nPreviousButton.displayName = \"PreviousButton\";\r\n\r\nexport default PreviousButton;\r\n","const NextButton = () => null;\r\n\r\nNextButton.displayName = 'NextButton';\r\n\r\nexport default NextButton;","const SubmitButton = () => null;\r\n\r\nSubmitButton.displayName = \"SubmitButton\";\r\n\r\nexport default SubmitButton;\r\n","import { Formik } from \"formik\";\r\nimport Wizard from \"./Wizard\";\r\nimport StepsList from \"./StepsList\";\r\nimport Step from \"./Step\";\r\nimport ButtonsList from \"./ButtonsList\";\r\nimport PreviousButton from \"./PreviousButton\";\r\nimport NextButton from \"./NextButton\";\r\nimport SubmitButton from \"./SubmitButton\";\r\n\r\nfunction App({ components, initialValues, onSubmit, ...props }) {\r\n  return (\r\n    <Formik initialValues={initialValues}>\r\n      {(formik) => {\r\n        const getValidators = (validatorFuncs) =>\r\n          validatorFuncs.map((func) => () => func({ ...formik }));\r\n        return (\r\n          <Wizard onSubmit={onSubmit} initialValues={initialValues} {...formik} {...props}>\r\n            <StepsList\r\n              validators={getValidators(components.map(({ validate }) => validate || (() => true)))}\r\n            >\r\n              {components.map((c) => (\r\n                <Step key={c.title} component={c}></Step>\r\n              ))}\r\n            </StepsList>\r\n            <ButtonsList {...formik}>\r\n              <PreviousButton />\r\n              <NextButton />\r\n              <SubmitButton />\r\n            </ButtonsList>\r\n          </Wizard>\r\n        );\r\n      }}\r\n      {/* <DisplayFormikState {...props} /> */}\r\n    </Formik>\r\n  );\r\n}\r\n\r\n// const WithFormikApp = withFormik(App);\r\n\r\nexport default App;\r\n","import { Transfer } from \"antd\";\r\nimport { filterParticipants } from \"../../../utils/common\";\r\nimport { produce } from \"immer\";\r\n\r\nconst filterObject = (participants, filterKey) =>\r\n  filterParticipants(participants, { filter: { [filterKey]: true } }).map(([name]) => name);\r\n\r\nconst participantChangeHandler = (draft, options) => {\r\n  options.forEach(({ keys, action }) => {\r\n    const keySet = new Set(keys);\r\n    Object.entries(draft.participants).forEach(([name, obj]) => {\r\n      const included = keySet.has(name);\r\n      if (obj[action] !== included) {\r\n        draft.participants[name][action] = included;\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nconst SelectParticipants = ({ formik }) => {\r\n  const { participants } = formik.values;\r\n\r\n  const onChange = (nextTargetKeys) => {\r\n    formik.setValues(\r\n      produce(formik.values, (draft) => {\r\n        participantChangeHandler(draft, [\r\n          { keys: [], action: \"selected\" },\r\n          { keys: nextTargetKeys, action: \"targeted\" },\r\n        ]);\r\n      })\r\n    );\r\n  };\r\n\r\n  const onSelectChange = (sourceSelectedKeys, targetSelectedKeys) => {\r\n    const selectedKeys = [...sourceSelectedKeys, ...targetSelectedKeys];\r\n    formik.setValues(\r\n      produce(formik.values, (draft) => {\r\n        participantChangeHandler(draft, [{ keys: selectedKeys, action: \"selected\" }]);\r\n      })\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Transfer\r\n        dataSource={Object.values(participants)}\r\n        titles={[\"未訂餐\", \"有要訂餐\"]}\r\n        targetKeys={filterObject(participants, \"targeted\")}\r\n        selectedKeys={filterObject(participants, \"selected\")}\r\n        onChange={onChange}\r\n        onSelectChange={onSelectChange}\r\n        render={(item) => item.name}\r\n      ></Transfer>\r\n    </>\r\n  );\r\n};\r\n\r\nSelectParticipants.validate = (formik) => {\r\n  const errors = {};\r\n  const errorMsgs = [];\r\n  const { participants } = formik.values;\r\n  if (filterParticipants(participants).length < 2) {\r\n    errorMsgs.push(\"至少需選取2個訂餐人\");\r\n  }\r\n\r\n  if (errorMsgs.length > 0) {\r\n    errors.errorMsgs = errorMsgs;\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\nSelectParticipants.title = \"請選擇參與訂餐人\";\r\n\r\nexport default SelectParticipants;\r\n","import styled from \"styled-components\";\r\n\r\nimport { FastField } from \"formik\";\r\nimport colors from \"../../utils/colors\";\r\n\r\nconst StyledFastField = styled(FastField)`\r\n  outline: none;\r\n  cursor: pointer;\r\n  width: 155px;\r\n  height: 36px;\r\n  border-radius: 2px;\r\n  border: 1px\r\n    ${({ errors, touched }) => {\r\n      return errors && touched ? \"red\" : colors.getGray(0.2);\r\n    }}\r\n    solid;\r\n  padding-left: 4px;\r\n  font-size: ${(props) => props.fontSize}px;\r\n  transition: 0.2s ease-in-out;\r\n  &:hover {\r\n    border: 1px ${colors.getGray(0.25)} solid;\r\n    background-color: ${colors.getGray(0.15)};\r\n  }\r\n  /* &:focus {\r\n    background-color: ${colors.white};\r\n    border: 1px ${colors.primaryBackgroundLight} solid;\r\n  } */\r\n  ::-webkit-inner-spin-button {\r\n    -webkit-appearance: none;\r\n    margin: 0;\r\n  }\r\n  ::-webkit-outer-spin-button {\r\n    -webkit-appearance: none;\r\n    margin: 0;\r\n  }\r\n`;\r\n\r\nconst Field = ({ type = \"number\", ...props }) => (\r\n  <StyledFastField type={type} {...props}></StyledFastField>\r\n);\r\n\r\nexport default Field;\r\n","import { Typography } from \"antd\";\r\nimport styled from \"styled-components\";\r\n\r\nconst StyledText = styled(Typography.Text)`\r\n  font-size: ${(props) => props?.size}px;\r\n`;\r\n\r\nconst Text = ({ size = 16, children }) => {\r\n  return <StyledText size={size}>{children}</StyledText>;\r\n};\r\n\r\nexport default Text;\r\n","import styled from \"styled-components\";\r\n\r\nimport Field from \"./Field\";\r\nimport Text from \"../../components/Text\";\r\n\r\nconst Wrapper = styled.div`\r\n  width: ${(props) => props.width}px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 8px;\r\n  & > * {\r\n    display: flex;\r\n  }\r\n`;\r\n\r\nconst InputItem = (props) => {\r\n  const { text = \"\", width = 275 } = props;\r\n  return (\r\n    <Wrapper width={width}>\r\n      {text === \"\" ? <></> : <Text>{text}</Text>}\r\n      <Field {...props}></Field>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default InputItem;\r\n","import Input from \"../../../components/Input\";\r\nimport { filterParticipants } from \"../../../utils/common\";\r\n\r\nconst RecordCost = ({ formik }) => {\r\n  const { participants } = formik.values;\r\n\r\n  return (\r\n    <>\r\n      {filterParticipants(participants).map(([name]) => {\r\n        return (\r\n          <Input\r\n            name={`participants[${name}].cost`}\r\n            key={name}\r\n            text={name}\r\n            value={formik?.values?.participants?.[name]?.cost}\r\n            onChange={formik.handleChange}\r\n            onBlur={formik.handleBlur}\r\n            touched={formik?.touched?.participants?.[name]}\r\n            errors={formik.errors[name]}\r\n            placeholder=\"enter somthing\"\r\n          ></Input>\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n};\r\n\r\nRecordCost.validate = (formik) => {\r\n  const errors = {};\r\n  const errorMsgs = [];\r\n  const { participants } = formik.values;\r\n  const existUnfilled =\r\n    filterParticipants(participants, { filter: { targeted: true, cost: \"\" } }).length > 0;\r\n\r\n  if (existUnfilled) {\r\n    errorMsgs.push(\"需填寫所有訂餐人金額。若沒有訂餐請回上一步移除訂餐人。\");\r\n  }\r\n\r\n  if (errorMsgs.length > 0) {\r\n    errors.errorMsgs = errorMsgs;\r\n  }\r\n  return errors;\r\n};\r\n\r\nRecordCost.title = \"請輸入訂餐金額\";\r\n\r\nexport default RecordCost;\r\n","import { produce } from \"immer\";\r\nimport { Radio, Space } from \"antd\";\r\n\r\nimport { filterParticipants } from \"../../../utils/common\";\r\n\r\nconst SelectPayer = ({ formik }) => {\r\n  const { participants, payer } = formik.values;\r\n  return (\r\n    <>\r\n      <Radio.Group\r\n        buttonStyle=\"solid\"\r\n        value={payer}\r\n        onChange={(e) => {\r\n          formik.setValues(\r\n            produce(formik.values, (draft) => {\r\n              draft.payer = e.target.value;\r\n            })\r\n          );\r\n        }}\r\n      >\r\n        <Space direction=\"vertical\">\r\n          {filterParticipants(participants).map(([name]) => (\r\n            <Radio.Button key={name} value={name}>\r\n              {name}\r\n            </Radio.Button>\r\n          ))}\r\n        </Space>\r\n      </Radio.Group>\r\n    </>\r\n  );\r\n};\r\n\r\nSelectPayer.validate = (formik) => {\r\n  const errors = {};\r\n  const errorMsgs = [];\r\n  const { payer, participants } = formik.values;\r\n\r\n  if (!payer || !participants[payer].targeted) {\r\n    errorMsgs.push(\"請選擇付款人\");\r\n  }\r\n\r\n  if (errorMsgs.length > 0) {\r\n    errors.errorMsgs = errorMsgs;\r\n  }\r\n  return errors;\r\n};\r\n\r\nSelectPayer.title = \"請選擇付款人\";\r\n\r\nexport default SelectPayer;\r\n","import { produce } from \"immer\";\r\n\r\nimport Input from \"../../../components/Input\";\r\n\r\nconst SelectPayer = ({ formik }) => {\r\n  const { delivery, discount, note } = formik.values;\r\n  return (\r\n    <div>\r\n      <Input\r\n        text=\"運費\"\r\n        value={delivery?.fee || \"\"}\r\n        onChange={(e) => {\r\n          const { value } = e.target;\r\n          const fee = value === \"\" ? value : +value;\r\n          formik.setValues(\r\n            produce(formik.values, (draft) => {\r\n              draft.delivery.fee = fee;\r\n            })\r\n          );\r\n        }}\r\n        placeholder=\"請輸入運費\"\r\n      ></Input>\r\n      <Input\r\n        text=\"優惠\"\r\n        value={discount?.amount || \"\"}\r\n        onChange={(e) => {\r\n          const { value } = e.target;\r\n          const amount = value === \"\" ? value : +value;\r\n          formik.setValues(\r\n            produce(formik.values, (draft) => {\r\n              draft.discount.amount = amount;\r\n            })\r\n          );\r\n        }}\r\n        placeholder=\"請輸入優惠\"\r\n      ></Input>\r\n      <Input\r\n        type=\"text\"\r\n        text=\"備註\"\r\n        value={note || \"\"}\r\n        onChange={(e) => {\r\n          const { value } = e.target;\r\n          formik.setValues(\r\n            produce(formik.values, (draft) => {\r\n              draft.note = value;\r\n            })\r\n          );\r\n        }}\r\n      ></Input>\r\n    </div>\r\n  );\r\n};\r\n\r\nSelectPayer.title = \"其他選項\";\r\n\r\nexport default SelectPayer;\r\n","import { Table, Typography, Tooltip } from \"antd\";\r\nimport { CrownTwoTone } from \"@ant-design/icons\";\r\n\r\nimport { filterParticipants, fixNumber } from \"../../../utils/common\";\r\nimport colors from \"../../../utils/colors\";\r\n\r\nconst arrangeValues = (values) => {\r\n  const {\r\n    delivery: { fee: deliveryFee = 0 },\r\n    discount: { amount: discountAmount = 0 },\r\n    participants = {},\r\n    payer = \"\",\r\n  } = values;\r\n  const filteredParticipants = filterParticipants(participants);\r\n  const totalAmount = filteredParticipants.reduce((acc, [_, { cost }]) => acc + cost, 0);\r\n  const participantCount = filteredParticipants.length;\r\n  const totalSharedFee = deliveryFee - discountAmount;\r\n  const sharedFee = fixNumber(totalSharedFee / participantCount);\r\n  const columns = [\r\n    {\r\n      title: \"訂餐人\",\r\n      dataIndex: \"name\",\r\n      key: \"name\",\r\n      render: (text) => (\r\n        <Tooltip title={payer === text ? \"付款人\" : null}>\r\n          <Typography.Text strong>\r\n            {payer === text && <CrownTwoTone twoToneColor={colors.mark} />}\r\n            {text}\r\n          </Typography.Text>\r\n        </Tooltip>\r\n      ),\r\n    },\r\n\r\n    {\r\n      title: \"金額\",\r\n      dataIndex: \"cost\",\r\n      key: \"cost\",\r\n      render: (cost) => (\r\n        <Tooltip title={`${cost} ${sharedFee >= 0 ? \"+\" : \"-\"} ${Math.abs(sharedFee)}`}>\r\n          <Typography.Link target=\"_blank\">{fixNumber(cost + sharedFee)}</Typography.Link>\r\n        </Tooltip>\r\n      ),\r\n    },\r\n  ];\r\n  const dataSource = filteredParticipants.map(([name, { cost }]) => ({\r\n    key: name,\r\n    name,\r\n    cost,\r\n  }));\r\n  return {\r\n    discountAmount,\r\n    totalAmount,\r\n    deliveryFee,\r\n    totalSharedFee,\r\n    participantCount,\r\n    sharedFee,\r\n    dataSource,\r\n    columns,\r\n  };\r\n};\r\n\r\nconst ResultsPreview = ({ formik }) => {\r\n  const { values } = formik;\r\n  const {\r\n    discountAmount,\r\n    deliveryFee,\r\n    totalAmount,\r\n    totalSharedFee,\r\n    participantCount,\r\n    sharedFee,\r\n    dataSource,\r\n    columns,\r\n  } = arrangeValues(values);\r\n  const { note } = values;\r\n  return (\r\n    <>\r\n      <Typography.Text strong>{sharedFee < 0 ? \"共享優惠\" : \"共同分擔\"}：</Typography.Text>\r\n      <Tooltip title={`運費：${deliveryFee}，優惠：${discountAmount}`}>\r\n        <Typography.Link target=\"_blank\">{Math.abs(totalSharedFee)}</Typography.Link>\r\n      </Tooltip>{\" \"}\r\n      ÷ {participantCount} = {Math.abs(sharedFee)}\r\n      <br></br>\r\n      <Typography.Text strong>備註：</Typography.Text>\r\n      {note ? note : <Typography.Text type=\"secondary\">無備註</Typography.Text>}\r\n      <Table\r\n        scroll={{ y: 300 }}\r\n        size=\"small\"\r\n        pagination={false}\r\n        columns={columns}\r\n        dataSource={dataSource}\r\n        summary={() => (\r\n          <Table.Summary fixed>\r\n            <Table.Summary.Row>\r\n              <Table.Summary.Cell index={0}>總額</Table.Summary.Cell>\r\n              <Table.Summary.Cell index={1}>{totalAmount + totalSharedFee}</Table.Summary.Cell>\r\n            </Table.Summary.Row>\r\n          </Table.Summary>\r\n        )}\r\n      ></Table>\r\n    </>\r\n  );\r\n};\r\n\r\nResultsPreview.title = \"結果預覽\";\r\n\r\nexport default ResultsPreview;\r\n","import Modal from \"../../../components/Modal\";\r\n\r\nimport FormikWizard from \"../../../components/FormikWizard\";\r\n\r\nimport SelectParticipants from \"./SelectParticipants\";\r\nimport RecordCost from \"./RecordCost\";\r\nimport SelectPayer from \"./SelectPayer\";\r\nimport RecordOtherStuff from \"./RecordOtherStuff\";\r\nimport ResultsPreview from \"./ResultsPreview\";\r\n\r\nconst components = [SelectParticipants, RecordCost, SelectPayer, RecordOtherStuff, ResultsPreview];\r\n\r\nconst App = ({ initialValues, button, buttonTitle = \"新增一筆記錄\", onSubmit }) => (\r\n  <Modal button={button} buttonTitle={buttonTitle}>\r\n    <FormikWizard\r\n      initialValues={initialValues}\r\n      components={components}\r\n      onSubmit={onSubmit}\r\n    ></FormikWizard>\r\n  </Modal>\r\n);\r\n\r\nexport default App;\r\n","import React, { useState, Children, cloneElement, useEffect } from \"react\";\r\nimport { Popconfirm } from \"antd\";\r\n\r\nconst _Popconfirm = ({ children, popconfirmTitle = \"title\", onConfirm, ...props }) => {\r\n  const [visible, setVisible] = useState(false);\r\n  const [confirmLoading, setConfirmLoading] = useState(false);\r\n\r\n  useEffect(\r\n    () => () => {\r\n      setVisible(null);\r\n      setConfirmLoading(null);\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    []\r\n  );\r\n\r\n  const showPopconfirm = () => {\r\n    setVisible(true);\r\n  };\r\n\r\n  const handleOk = async () => {\r\n    setConfirmLoading(true);\r\n    await onConfirm();\r\n    setVisible(false);\r\n    setConfirmLoading(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setVisible(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Popconfirm\r\n        title={popconfirmTitle}\r\n        visible={visible}\r\n        onConfirm={handleOk}\r\n        okButtonProps={{ loading: confirmLoading }}\r\n        onCancel={handleCancel}\r\n        onVisibleChange={(visible) => {\r\n          if (!visible) {\r\n            setVisible(false);\r\n          }\r\n        }}\r\n      >\r\n        {Children.map(children, (child) =>\r\n          cloneElement(child, {\r\n            onClick: showPopconfirm,\r\n            ...props,\r\n          })\r\n        )}\r\n      </Popconfirm>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default _Popconfirm;\r\n","import styled from \"styled-components\";\r\n\r\nconst StyledButton = styled.button`\r\n  outline: none;\r\n  border: none;\r\n  background-color: transparent;\r\n  box-shadow: rgba(99, 99, 99, 0.2) 0px 0px 8px 0px;\r\n  cursor: pointer;\r\n  margin: 20px;\r\n  border-radius: 4px;\r\n  transition: 1.9s cubic-bezier(0.075, 0.82, 0.165, 1);\r\n  margin: 4px;\r\n  &:hover {\r\n    box-shadow: rgba(20, 20, 20, 0.4) 0px 0px 13px 2px;\r\n  }\r\n  &:active {\r\n    box-shadow: rgba(99, 99, 99, 0.2) 0px 0px 4px 0px;\r\n    background-color: rgba(99, 99, 99, 0.2);\r\n  }\r\n`;\r\n\r\nconst IconButton = ({ children, ...props }) => {\r\n  return <StyledButton {...props}>{children}</StyledButton>;\r\n};\r\n\r\nexport default IconButton;\r\n","import moment from \"moment\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Table, Tooltip } from \"antd\";\r\nimport { DeleteTwoTone, EditTwoTone } from \"@ant-design/icons\";\r\n\r\nimport { removeRecord, updateRecord } from \"../../actions/recordAction\";\r\nimport { fixNumber } from \"../../utils/common\";\r\n\r\nimport { filterParticipants } from \"../../utils/common\";\r\nimport AddNewRecordModal from \"../_common/CURDRecordModal\";\r\n\r\nimport Popconfirm from \"../../components/Popconfirm\";\r\nimport IconButton from \"../../components/IconButton\";\r\n\r\nconst generateColumns = (events) => {\r\n  const totalCostAmount = generateTotalCostAmount(events);\r\n  const participants = Object.keys(totalCostAmount).map((participant) => {\r\n    return {\r\n      title: participant,\r\n      render: (cost) => cost || 0,\r\n      children: [\r\n        {\r\n          title: fixNumber(totalCostAmount[participant]),\r\n          dataIndex: participant,\r\n          key: participant,\r\n        },\r\n      ],\r\n    };\r\n  });\r\n  participants.sort((a, b) => a.children[0].title - b.children[0].title);\r\n  return [\r\n    {\r\n      title: \"日期\",\r\n      dataIndex: \"date\",\r\n      key: \"date\",\r\n    },\r\n    { title: \"付款人\", dataIndex: \"payer\", key: \"payer\" },\r\n    { title: \"運費\", dataIndex: \"deliveryFee\", key: \"deliveryFee\" },\r\n    { title: \"優惠\", dataIndex: \"discountAmount\", key: \"discountAmount\" },\r\n    ...participants,\r\n    { title: \"總額\", dataIndex: \"totalAmount\", key: \"totalAmount\" },\r\n    { title: \"備註\", dataIndex: \"note\", key: \"note\" },\r\n    { title: \"Action\", dataIndex: \"action\", key: \"action\", width: \"100px\" },\r\n  ];\r\n};\r\n\r\nconst generateDataSource = (events, dispatch) => {\r\n  return events.map((event, i) => {\r\n    const { date, participants, payer, delivery, discount, note, id } = event;\r\n    const deliveryFee = delivery?.fee || 0;\r\n    const discountAmount = discount?.amount || 0;\r\n    return {\r\n      key: `${i + 1}`,\r\n      date: moment(date).format(\"M / D\"),\r\n      payer,\r\n      discountAmount,\r\n      ...filterParticipants(participants).reduce(\r\n        (acc, [name, obj]) => ({\r\n          ...acc,\r\n          ...{ [name]: obj?.cost || 0 },\r\n        }),\r\n        {}\r\n      ),\r\n      deliveryFee,\r\n      totalAmount: filterParticipants(participants).reduce(\r\n        (acc, [_, { cost = 0 }]) => acc + cost,\r\n        deliveryFee - discountAmount\r\n      ),\r\n      note,\r\n      action: (\r\n        <div>\r\n          <AddNewRecordModal\r\n            initialValues={event}\r\n            button={\r\n              <Tooltip title=\"編輯此筆記錄\" placement=\"bottomLeft\">\r\n                <IconButton>\r\n                  <EditTwoTone twoToneColor=\"#5b0\" />\r\n                </IconButton>\r\n              </Tooltip>\r\n            }\r\n            onSubmit={(record) => {\r\n              dispatch(updateRecord(record.id, record));\r\n            }}\r\n          >\r\n            Update\r\n          </AddNewRecordModal>\r\n          <Popconfirm\r\n            popconfirmTitle=\"即將刪除此筆記錄\"\r\n            onConfirm={() => dispatch(removeRecord(id))}\r\n          >\r\n            <Tooltip title=\"刪除此筆記錄\" placement=\"bottomLeft\">\r\n              <IconButton>\r\n                <DeleteTwoTone twoToneColor=\"#f50\" />\r\n              </IconButton>\r\n            </Tooltip>\r\n          </Popconfirm>\r\n        </div>\r\n      ),\r\n    };\r\n  });\r\n};\r\n\r\nconst generateTotalCostAmount = (events) =>\r\n  events.reduce((acc, { participants, payer, delivery, discount }) => {\r\n    if (Object.keys(participants).length === 0) {\r\n      return acc;\r\n    }\r\n    const deliveryFee = delivery?.fee || 0;\r\n    const discountAmount = discount?.amount || 0;\r\n    const initValue = deliveryFee - discountAmount;\r\n    const participantEntries = filterParticipants(participants);\r\n    const averageDeliveryFee = initValue / participantEntries.length;\r\n    let totalAmount = initValue;\r\n    participantEntries.forEach(([name, { cost = 0 }]) => {\r\n      acc[name] = (acc[name] || 0) - cost - averageDeliveryFee;\r\n      totalAmount += cost;\r\n    });\r\n    acc[payer] += totalAmount;\r\n    return acc;\r\n  }, {});\r\n\r\nconst DataTable = () => {\r\n  const dispatch = useDispatch();\r\n  const records = useSelector((state) => state.records);\r\n  const columns = generateColumns(records);\r\n  const dataSource = generateDataSource(records, dispatch);\r\n  return <Table dataSource={dataSource} columns={columns} pagination={{ pageSize: 4 }}></Table>;\r\n};\r\nexport default DataTable;\r\n","import styled from \"styled-components\";\r\nimport { Button as _Button } from \"antd\";\r\n\r\nconst StyledButton = styled(_Button)`\r\n`;\r\n\r\nconst Button = (props) => {\r\n  return <StyledButton {...props}>{props.children}</StyledButton>;\r\n};\r\n\r\nexport default Button;\r\n","import * as yup from \"yup\";\r\nimport styled from \"styled-components\";\r\nimport { Select } from \"antd\";\r\nimport { Formik, Form, ErrorMessage } from \"formik\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { addUser } from \"../../actions/userAction\";\r\nimport Modal from \"../../components/Modal\";\r\nimport Input from \"../../components/Input\";\r\nimport Button from \"../../components/Button\";\r\n\r\nconst { Option } = Select;\r\n\r\nconst Wrapper = styled.div`\r\n  margin-top: 24px;\r\n`;\r\n\r\nconst AddUserModal = () => {\r\n  const users = useSelector((state) => state.users);\r\n  const dispatch = useDispatch();\r\n  return (\r\n    <Modal buttonTitle=\"新增使用者\" title=\"新增使用者\">\r\n      <Formik\r\n        initialValues={{ userName: \"\" }}\r\n        validationSchema={() =>\r\n          yup.object().shape({\r\n            userName: yup.string().required(\"必須填寫使用者名稱\"),\r\n          })\r\n        }\r\n      >\r\n        {(formik) => {\r\n          const {\r\n            values: { userName },\r\n          } = formik;\r\n          return (\r\n            <Form>\r\n              <Wrapper>\r\n                <Input\r\n                  type=\"text\"\r\n                  text=\"使用者名稱\"\r\n                  name=\"userName\"\r\n                  onChange={formik.handleChange}\r\n                  onBlur={formik.handleBlur}\r\n                ></Input>\r\n                <ErrorMessage name=\"userName\"></ErrorMessage>\r\n              </Wrapper>\r\n              <Wrapper>\r\n                <Select style={{ width: 150 }}>\r\n                  {Object.entries(users).map(([name]) => (\r\n                    <Option key={name}>{name}</Option>\r\n                  ))}\r\n                </Select>\r\n              </Wrapper>\r\n              <Wrapper>\r\n                <Button\r\n                  type=\"primary\"\r\n                  onClick={() => {\r\n                    dispatch(addUser({ userName }));\r\n                  }}\r\n                >\r\n                  新增使用者\r\n                </Button>\r\n              </Wrapper>\r\n            </Form>\r\n          );\r\n        }}\r\n      </Formik>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default AddUserModal;\r\n","import CURDRecordModal from \"../_common/CURDRecordModal\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { addNewRecord } from \"../../actions/recordAction\";\r\nimport { genNewRecordObject } from \"../../utils/common\";\r\n\r\nconst AddNewRecordModal = () => {\r\n  const users = useSelector((state) => state.users);\r\n\r\n  const initNewRecord = genNewRecordObject(users);\r\n  console.log(initNewRecord);\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <CURDRecordModal\r\n      initialValues={initNewRecord}\r\n      buttonTitle=\"新增一筆資料\"\r\n      onSubmit={(record) => {\r\n        dispatch(addNewRecord({ newRecord: record }));\r\n      }}\r\n    ></CURDRecordModal>\r\n  );\r\n};\r\n\r\nexport default AddNewRecordModal;\r\n","import AddUserModal from \"./AddUserModal\";\r\nimport AddNewRecordModal from \"./AddNewRecordModal\";\r\n\r\nconst Panel = () => {\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        height: \"50px\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"flex-end\",\r\n      }}\r\n    >\r\n      <AddUserModal></AddUserModal>\r\n      <AddNewRecordModal></AddNewRecordModal>\r\n    </div>\r\n  );\r\n};\r\nexport default Panel;\r\n","import { useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { fetchAllRecords } from \"./actions/recordAction\";\r\nimport { fetchAllUsers } from \"./actions/userAction\";\r\nimport DataTable from \"./containers/DataTable\";\r\nimport Panel from \"./containers/Panel\";\r\n\r\nconst App = () => {\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    dispatch(fetchAllRecords());\r\n    dispatch(fetchAllUsers());\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <>\r\n      <Panel></Panel>\r\n      <DataTable></DataTable>\r\n    </>\r\n  );\r\n};\r\nexport default App;\r\n","import {\r\n  RECORDS__LOAD_ALL_RECORD,\r\n  RECORDS__ADD_RECORD,\r\n  RECORDS__UPDATE_RECORD,\r\n  RECORDS__REMOVE_RECORD,\r\n} from \"../actions/recordAction\";\r\nconst initialState = [];\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case RECORDS__ADD_RECORD:\r\n      return [action.payload, ...state];\r\n    case RECORDS__LOAD_ALL_RECORD:\r\n      return [...action.payload];\r\n    case RECORDS__UPDATE_RECORD: {\r\n      const { recordId, updatedRecord } = action.payload;\r\n      return state.map((s) => (s.id === recordId ? updatedRecord : s));\r\n    }\r\n\r\n    case RECORDS__REMOVE_RECORD:\r\n      return state.filter(({ id }) => id !== action.payload.recordId);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import { USER__LOAD_ALL_USERS, USER__ADD_USER } from \"../actions/userAction\";\r\nconst initialState = {};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case USER__LOAD_ALL_USERS:\r\n      return { ...action.payload };\r\n    case USER__ADD_USER:\r\n      return { ...state, [action.payload.name]: { ...action.payload } };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport records from \"./reducers/recordReducer\";\r\nimport users from \"./reducers/userReducer\";\r\n\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport { combineReducers } from \"redux\";\r\nimport { createLogger } from \"redux-logger\";\r\n\r\nconst loggerMiddleware = createLogger();\r\n\r\nconst store = createStore(\r\n  combineReducers({\r\n    records,\r\n    users,\r\n  }),\r\n  applyMiddleware(thunkMiddleware, loggerMiddleware)\r\n);\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport \"antd/dist/antd.css\";\r\nimport App from \"./App\";\r\n// import reportWebVitals from \"./reportWebVitals\";\r\nimport store from \"./store\";\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n// reportWebVitals();\r\n"],"sourceRoot":""}