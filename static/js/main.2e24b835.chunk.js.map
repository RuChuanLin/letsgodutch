{"version":3,"sources":["firebase/init.js","firebase/index.js","utils/dbApiUnification.js","actions/recordAction.js","actions/userAction.js","utils/common.js","components/Modal.js","components/FormikWizard/Wizard.js","components/FormikWizard/StepsList.js","components/FormikWizard/Step.js","utils/colors.js","components/FormikWizard/Button.js","components/FormikWizard/ButtonsList.js","components/FormikWizard/PreviousButton.js","components/FormikWizard/NextButton.js","components/FormikWizard/SubmitButton.js","components/FormikWizard/index.js","containers/_common/CURDRecordModal/SelectParticipants.js","components/Input/Field.js","components/Text/index.js","components/Input/index.js","containers/_common/CURDRecordModal/RecordCost.js","containers/_common/CURDRecordModal/SelectPayer.js","containers/_common/CURDRecordModal/RecordOtherStuff.js","containers/_common/CURDRecordModal/ResultsPreview.js","containers/_common/CURDRecordModal/index.js","components/Popconfirm.js","components/IconButton/index.js","containers/DataTable/index.js","components/Button/index.js","containers/Panel/AddUserModal.js","containers/Panel/AddNewRecordModal.js","containers/Panel/index.js","App.js","reducers/recordReducer.js","reducers/userReducer.js","store.js","index.js"],"names":["urlSearchParams","URLSearchParams","window","location","search","configs","Object","fromEntries","entries","db","apiKey","authDomain","projectId","firebase","initializeApp","firestore","e","Localbase","getRecordDB","collection","getUserDB","snapshots2Docs","snapshots","docs","snapshot2Data","snapshot","data","RECORDS__LOAD_ALL_RECORD","RECORDS__ADD_RECORD","RECORDS__UPDATE_RECORD","RECORDS__REMOVE_RECORD","USER__LOAD_ALL_USERS","USER__ADD_USER","filterParticipants","memoIniObject","memoFinishedObject","memoIniOptionsObject","participantObject","options","filter","targeted","participant","every","key","value","genNewRecordObject","memoInitUsers","memoFinishedNewRecord","users","delivery","fee","discount","amount","participants","keys","reduce","acc","name","selected","cost","payer","fixNumber","number","fixDigit","nPowerOf10","Math","round","Number","EPSILON","CustomModal","button","buttonTitle","okFunction","children","useState","isModalVisible","setIsModalVisible","showModal","cloneElement","onClick","type","style","marginRight","visible","onOk","onCancel","footer","centered","overflow","maxWidth","Children","map","child","getTotalSteps","reactChildren","React","toArray","displayName","props","length","Error","Wizard","onSubmit","activeStepIndex","totalSteps","stepTabs","direction","state","setState","onPreviousStep","produce","draftState","onNextStep","submitHandler","values","setValues","initialValues","draft","updateStepTabs","stepsComponent","buttonsListComponent","validators","forEach","getInitialComponents","Wrapper","styled","div","StepsList","useEffect","title","push","formik","index","isActive","getStepChildren","getX","actionPara","Step","component","y","useTransition","enter","x","opacity","from","leave","transition","item","position","Title","level","primaryBackground","primaryBackgroundDark","chroma","darken","hex","primaryBackgroundLight","brighten","white","colors","mark","error","getGray","scale","WizardButton","show","label","validator","errorMsgs","call","tooltipVisible","setTooltipVisible","disabledNext","disabled","color","onVisibleChange","defaultProps","ButtonsList","RocketOutlined","PreviousButton","NextButton","SubmitButton","App","components","validatorFuncs","validate","func","c","filterObject","filterKey","participantChangeHandler","action","keySet","Set","obj","included","has","SelectParticipants","dataSource","titles","targetKeys","selectedKeys","onChange","nextTargetKeys","onSelectChange","sourceSelectedKeys","targetSelectedKeys","render","errors","StyledFastField","FastField","touched","fontSize","Field","StyledText","Typography","Text","size","width","InputItem","text","RecordCost","Input","handleChange","onBlur","handleBlur","placeholder","SelectPayer","Group","buttonStyle","target","Button","note","ResultsPreview","deliveryFee","discountAmount","filteredParticipants","totalAmount","participantCount","totalSharedFee","sharedFee","columns","dataIndex","strong","CrownTwoTone","twoToneColor","abs","Link","arrangeValues","scroll","pagination","summary","Summary","fixed","Row","Cell","RecordOtherStuff","Modal","FormikWizard","_Popconfirm","popconfirmTitle","onConfirm","setVisible","confirmLoading","setConfirmLoading","showPopconfirm","handleOk","a","okButtonProps","loading","StyledButton","IconButton","generateDataSource","events","dispatch","event","i","date","id","moment","format","placement","EditTwoTone","record","recordId","updatedRecord","doc","set","payload","Popconfirm","delete","DeleteTwoTone","generateTotalCostAmount","initValue","participantEntries","averageDeliveryFee","DataTable","useDispatch","records","useSelector","totalCostAmount","sort","b","generateColumns","pageSize","_Button","Option","Select","AddUserModal","userName","validationSchema","yup","shape","required","nanoid","nameObject","valueOf","addUser","AddNewRecordModal","initNewRecord","CURDRecordModal","newRecord","arrangedRecord","Panel","display","height","alignItems","justifyContent","force","getState","orderBy","get","then","allRecords","fetchAllRecords","userObject","cur","fetchAllUsers","initialState","reducer","s","loggerMiddleware","createLogger","store","createStore","combineReducers","applyMiddleware","thunkMiddleware","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.2e24b835.chunk.js","sourcesContent":["import firebase from \"firebase\";\nimport Localbase from \"localbase\";\nimport \"firebase/database\";\n// import configs from \"./configs\";\n\nconst urlSearchParams = new URLSearchParams(window.location.search);\nconst configs = Object.fromEntries(urlSearchParams.entries());\n\nlet db = null;\nif (configs.apiKey && configs.authDomain && configs.projectId) {\n  try {\n    firebase.initializeApp(configs);\n    db = firebase.firestore();\n  } catch (e) {\n    db = new Localbase(\"db\");\n  }\n} else {\n  db = new Localbase(\"db\");\n}\n\nexport default db;\n","import firebase from \"./init\";\n\nexport const getRecordDB = () => firebase.collection(\"records\");\nexport const getUserDB = () => firebase.collection(\"users\");\n","export const snapshots2Docs = (snapshots) => (snapshots?.docs ? snapshots.docs : snapshots);\nexport const snapshot2Data = (snapshot) => {\n  if (snapshot?.data && typeof snapshot.data === \"function\") {\n    return snapshot.data();\n  }\n  return snapshot;\n};\n\nexport const getIdFromAddedObject = (addedObject) => {\n  if (typeof addedObject === \"string\") {\n    return addedObject;\n  }\n  return addedObject?.data?.key;\n};\n","import moment from \"moment\";\nimport { nanoid } from \"nanoid\";\nimport { getRecordDB } from \"../firebase\";\nimport { snapshots2Docs, snapshot2Data, getIdFromAddedObject } from \"../utils/dbApiUnification\";\n\nexport const RECORDS__LOAD_ALL_RECORD = \"RECORDS__LOAD_ALL_RECORD\";\nexport const RECORDS__ADD_RECORD = \"RECORDS__ADD_RECORD\";\nexport const RECORDS__UPDATE_RECORD = \"RECORDS__UPDATE_RECORD\";\nexport const RECORDS__REMOVE_RECORD = \"RECORDS__REMOVE_RECORD\";\n\nexport const fetchAllRecords =\n  ({ force } = {}) =>\n  (dispatch, getState) => {\n    const { records } = getState();\n    if (records.length === 0 || force) {\n      getRecordDB()\n        .orderBy(\"date\", \"desc\")\n        .get()\n        .then((snapshots) => {\n          const docs = snapshots2Docs(snapshots);\n          const allRecords = docs.map((snapshot) => ({\n            ...snapshot2Data(snapshot),\n            id: snapshot.id,\n          }));\n          dispatch({ type: RECORDS__LOAD_ALL_RECORD, payload: allRecords });\n        });\n    } else {\n      dispatch({ type: RECORDS__LOAD_ALL_RECORD, payload: records });\n    }\n  };\n\nexport const addNewRecord = (newRecord) => async (dispatch) => {\n  if (!newRecord) {\n    return;\n  }\n  const id = nanoid();\n  const arrangedRecord = { ...newRecord, date: new moment().valueOf(), id };\n  const { data } = await getRecordDB().doc(id).set(arrangedRecord);\n  dispatch({ type: RECORDS__ADD_RECORD, payload: data });\n};\n\nexport const updateRecord = (recordId, updatedRecord) => async (dispatch) => {\n  try {\n    await getRecordDB().doc(recordId).set(updatedRecord);\n    dispatch({ type: RECORDS__UPDATE_RECORD, payload: { recordId, updatedRecord } });\n  } catch (e) {}\n};\n\nexport const removeRecord = (recordId) => async (dispatch) => {\n  try {\n    await getRecordDB().doc(recordId).delete();\n\n    dispatch({ type: RECORDS__REMOVE_RECORD, payload: { recordId } });\n  } catch (e) {}\n};\n","import moment from \"moment\";\nimport { nanoid } from \"nanoid\";\nimport { getUserDB } from \"../firebase\";\nimport { snapshots2Docs, snapshot2Data } from \"../utils/dbApiUnification\";\nexport const USER__LOAD_ALL_USERS = \"USER__LOAD_ALL_USERS\";\nexport const USER__ADD_USER = \"USER__ADD_USER\";\n\nexport const fetchAllUsers =\n  ({ force } = {}) =>\n  (dispatch, getState) => {\n    const { users = {} } = getState();\n    if (Object.keys(users).length === 0 || force) {\n      getUserDB()\n        .get()\n        .then((snapshots) => {\n          const docs = snapshots2Docs(snapshots);\n          const userObject = docs\n            .map(snapshot2Data)\n            .reduce((acc, cur) => ({ ...acc, [cur.name]: {} }), {});\n          dispatch({ type: USER__LOAD_ALL_USERS, payload: userObject });\n        });\n    }\n  };\n\nexport const addUser =\n  ({ userName } = {}) =>\n  async (dispatch) => {\n    if (userName) {\n      const id = nanoid();\n      const nameObject = {\n        name: userName,\n        date: new moment().valueOf(),\n        id,\n      };\n\n      await getUserDB().doc(id).set(nameObject);\n      dispatch({\n        type: USER__ADD_USER,\n        payload: { ...nameObject },\n      });\n    }\n  };\n","/**\n * filter participants\n *\n * this project requires to filter out untargete or unselected participants frequently, so we need a independant funtion to deal with it.\n *\n * note: this function use a memorization to minimize the amount of calculation.\n */\nconst filterParticipants = (() => {\n  let [memoIniObject, memoFinishedObject] = [null, null];\n  let [memoIniOptionsObject] = [null];\n  return (\n    participantObject,\n    options = {\n      filter: { targeted: true },\n    }\n  ) => {\n    if (participantObject === memoIniObject && memoIniOptionsObject === options) {\n      return memoFinishedObject;\n    }\n    memoIniObject = participantObject;\n    memoIniOptionsObject = options;\n    memoFinishedObject = Object.entries(participantObject).filter((participant) =>\n      Object.entries(options.filter).every(([key, value]) => participant?.[1]?.[key] === value)\n    );\n    return memoFinishedObject;\n  };\n})();\n\nexport const genNewRecordObject = (() => {\n  let [memoInitUsers, memoFinishedNewRecord] = [null, null];\n  return (users) => {\n    if (users !== memoInitUsers) {\n      memoInitUsers = users;\n      memoFinishedNewRecord = {\n        delivery: {\n          fee: 0,\n        },\n        discount: {\n          amount: 0,\n        },\n        participants: Object.keys(users).reduce(\n          (acc, name) => ({\n            ...acc,\n            [name]: { key: name, name, targeted: true, selected: false, cost: \"\" },\n          }),\n          {}\n        ),\n        payer: \"\",\n      };\n    }\n    return memoFinishedNewRecord;\n  };\n})();\n\nconst fixNumber = (number, options = {}) => {\n  const { fixDigit = 2 } = options;\n  const nPowerOf10 = 10 ** fixDigit;\n  return Math.round((number + Number.EPSILON) * nPowerOf10) / nPowerOf10;\n};\nexport { filterParticipants, fixNumber };\n","import React, { useState, Children, cloneElement } from \"react\";\nimport { Modal, Button } from \"antd\";\n\nconst CustomModal = ({ button, buttonTitle = \"Open Modal\", okFunction, children }) => {\n  const [isModalVisible, setIsModalVisible] = useState(false);\n\n  const showModal = () => {\n    setIsModalVisible(true);\n  };\n\n  const handleOk = () => {\n    okFunction();\n    setIsModalVisible(false);\n  };\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n  };\n\n  const clonedChildren = () =>\n    Children.map(children, (child) =>\n      cloneElement(child, {\n        isModalVisible,\n        setIsModalVisible,\n      })\n    );\n\n  return (\n    <>\n      {button ? (\n        cloneElement(button, {\n          onClick: showModal,\n        })\n      ) : (\n        <Button type=\"primary\" onClick={showModal} style={{ marginRight: 12 }}>\n          {buttonTitle}\n        </Button>\n      )}\n      <Modal\n        visible={isModalVisible}\n        onOk={handleOk}\n        onCancel={handleCancel}\n        footer={null}\n        centered\n        style={{ overflow: \"auto\", maxWidth: \"448px\" }}\n      >\n        {clonedChildren()}\n      </Modal>\n    </>\n  );\n};\n\nexport default CustomModal;\n","import React, { Children, cloneElement, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n// import StepTabs from \"./StepTabs\";\nimport { produce } from \"immer\";\n\nconst getTotalSteps = (children) => {\n  const reactChildren = React.Children.toArray(children);\n  for (const child of reactChildren) {\n    if (child.type.displayName === \"StepsList\") {\n      return child.props.children.length - 1;\n    }\n  }\n  throw new Error(\"Require StepsList\");\n};\n\nconst Wizard = ({ children, onSubmit, ...props }) => {\n  const [state, setState] = useState({\n    activeStepIndex: 0,\n    totalSteps: getTotalSteps(children),\n    stepTabs: [],\n    direction: 0,\n  });\n\n  const onPreviousStep = () =>\n    setState(\n      produce(state, (draftState) => {\n        draftState.activeStepIndex = state.activeStepIndex - 1;\n        draftState.direction = -1;\n      })\n    );\n\n  const onNextStep = () =>\n    setState(\n      produce(state, (draftState) => {\n        draftState.activeStepIndex = state.activeStepIndex + 1;\n        draftState.direction = 1;\n      })\n    );\n\n  const submitHandler = onSubmit\n    ? () => {\n        onSubmit(props.values);\n        props.setIsModalVisible(false);\n        props.setValues(props.initialValues);\n        setState(\n          produce(state, (draft) => {\n            draft.activeStepIndex = 0;\n            draft.direction = 0;\n          })\n        );\n      }\n    : () => {};\n\n  const updateStepTabs = (stepTabs) =>\n    setState(\n      produce(state, (draftState) => {\n        draftState.stepTabs = stepTabs;\n      })\n    );\n\n  const getInitialComponents = () => {\n    let stepsComponent = null;\n    let buttonsListComponent = null;\n    let validators = [];\n\n    Children.forEach(children, (child) => {\n      if (child.type.displayName === \"StepsList\") {\n        stepsComponent = cloneElement(child, {\n          activeStepIndex: state.activeStepIndex,\n          updateStepTabs: updateStepTabs,\n          direction: state.direction,\n          ...props,\n        });\n        if (child.props.validators) {\n          // eslint-disable-next-line prefer-destructuring\n          validators = child.props.validators;\n        }\n      }\n      if (child.type.displayName === \"ButtonsList\") {\n        buttonsListComponent = cloneElement(child, {\n          activeStepIndex: state.activeStepIndex,\n          totalSteps: state.totalSteps,\n          submitHandler,\n\n          onNextStep,\n          onPreviousStep,\n          validators,\n          ...props,\n        });\n      }\n    });\n    return { stepsComponent, buttonsListComponent };\n  };\n\n  const { stepsComponent, buttonsListComponent } = getInitialComponents();\n\n  return (\n    <div>\n      {/* <StepTabs tabs={state.stepTabs} activeStepIndex={state.activeStepIndex} /> */}\n      {stepsComponent}\n      {buttonsListComponent}\n    </div>\n  );\n};\n\nWizard.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n};\n\nWizard.displayName = \"Wizard\";\n\nexport default Wizard;\n","import React, { Children, cloneElement, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\n\nconst Wrapper = styled.div`\n  position: relative;\n  height: 344px;\n`;\n\nconst StepsList = (props) => {\n  useEffect(() => {\n    const stepTabs = [];\n    Children.forEach(props.children, (child) => {\n      if (child.props.title) {\n        stepTabs.push({ title: child.props.title });\n      }\n    });\n    props.updateStepTabs(stepTabs); \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const getStepChildren = () => {\n    const { activeStepIndex, children, direction, ...formik } = props;\n    const stepTabs = [];\n    const newChildren = Children.map(children, (child, index) => {\n      if (child.props.title) {\n        stepTabs.push({ title: child.props.title });\n      }\n      return cloneElement(child, {\n        isActive: index === activeStepIndex,\n        formik,\n        direction,\n      });\n    });\n    return newChildren;\n  };\n\n  return <Wrapper>{getStepChildren()}</Wrapper>;\n};\n\nStepsList.propTypes = {\n  activeStepIndex: PropTypes.number,\n  updateStepTabs: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n};\n\nStepsList.displayName = \"StepsList\";\n\nexport default StepsList;\n","import PropTypes from \"prop-types\";\nimport { useTransition, animated } from \"react-spring\";\nimport { Typography } from \"antd\";\n\nconst getX = (direction, actionPara) => 300 * direction * actionPara;\n\nconst Step = ({ isActive, component, direction, ...props }) => {\n  const y = direction === 0 ? 50 : -20;\n  const transition = useTransition(isActive, {\n    enter: { x: 0, y: 0, opacity: 1 },\n    from: { x: getX(direction, 1), y, opacity: 0 },\n    leave: { x: getX(direction, -1), y, opacity: 0 },\n  });\n\n  return transition((style, item) =>\n    item ? (\n      <animated.div style={{ position: \"absolute\", ...style }}>\n        <Typography.Title level={3}>{component?.title}</Typography.Title>\n        {component(props)}\n      </animated.div>\n    ) : (\n      <></>\n    )\n  );\n};\n\nStep.propTypes = {\n  isActive: PropTypes.bool,\n  component: PropTypes.func,\n  direction: PropTypes.number,\n};\n\nStep.displayName = \"Step\";\n\nexport default Step;\n","import chroma from \"chroma-js\";\n\nconst primaryBackground = \"#1890ff\";\nconst primaryBackgroundDark = chroma(primaryBackground).darken(0.3).hex();\nconst primaryBackgroundLight = chroma(primaryBackground).brighten(0.4).hex();\nconst mark = \"#C7802D\";\nconst error = \"#f50\";\nconst white = \"#FFFFFB\";\nconst black = \"#080808\";\nconst getGray = (scale) => chroma.scale([white, black])(scale).hex();\n\nconst colors = {\n  primaryBackground,\n  primaryBackgroundDark,\n  primaryBackgroundLight,\n  mark,\n  error,\n  white,\n  getGray,\n};\n\nexport default colors;\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, Tooltip } from \"antd\";\nimport colors from \"../../utils/colors\";\n\nconst WizardButton = ({ children, type, show, onClick, label, validator, ...props }) => {\n  const errorMsgs = (validator && validator.call(null)?.errorMsgs) || [];\n  const [tooltipVisible, setTooltipVisible] = useState(false);\n  const disabledNext = typeof validator === \"function\" && errorMsgs.length > 0;\n  return show ? (\n    children ? (\n      React.cloneElement(children, {\n        onClick: !validator || validator.call(null) ? onClick : null,\n        disabled: typeof validator === \"function\" && !validator.call(null),\n      })\n    ) : (\n      <Tooltip\n        title={errorMsgs && <span>{errorMsgs?.[0]}</span>}\n        color={colors.error}\n        visible={tooltipVisible}\n        onVisibleChange={(visible) => setTooltipVisible(visible && disabledNext)}\n      >\n        <Button\n          disabled={disabledNext}\n          type={type}\n          onClick={!validator || validator.call(null) ? onClick : null}\n          {...props}\n        >\n          {label || \"Next\"}\n        </Button>\n      </Tooltip>\n    )\n  ) : null;\n};\n\nWizardButton.defaultProps = {\n  type: \"button\",\n};\n\nWizardButton.propTypes = {\n  show: PropTypes.bool,\n  onClick: PropTypes.func,\n  label: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n  validator: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n};\n\nWizardButton.displayName = \"WizardButton\";\n\nexport default WizardButton;\n","import React, { Children } from \"react\";\n\nimport { RocketOutlined } from \"@ant-design/icons\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport Button from \"./Button\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 24px;\n`;\n\nconst ButtonsList = ({\n  activeStepIndex,\n  totalSteps,\n  onPreviousStep,\n  onNextStep,\n  onSubmit,\n  children,\n  validators,\n  ...formik\n}) => {  \n  return (\n    <Wrapper>\n      {Children.map(children, (child) => {\n        const validator = validators[activeStepIndex];\n        if (child.type.displayName === \"PreviousButton\") {\n          return (\n            <Button\n              type=\"link\"\n              show={activeStepIndex > 0}\n              onClick={onPreviousStep}\n              label=\"上一步\"\n              {...child.props}\n            />\n          );\n        }\n        if (child.type.displayName === \"NextButton\") {\n          return (\n            <Button\n              type=\"primary\"\n              show={activeStepIndex < totalSteps}\n              onClick={onNextStep}\n              validator={validator}\n              label=\"下一步\"\n              {...child.props}\n            />\n          );\n        }\n        if (child.type.displayName === \"SubmitButton\") {\n          return (\n            <Button\n              show={activeStepIndex === totalSteps}\n              onClick={formik.submitHandler}\n              validator={validator}\n              type=\"primary\"\n              label={\n                <span>\n                  <RocketOutlined /> 送出\n                </span>\n              }\n              {...child.props}\n            />\n          );\n        }\n        return child;\n      })}\n    </Wrapper>\n  );\n};\n\nButtonsList.propTypes = {\n  activeStepIndex: PropTypes.number,\n  totalSteps: PropTypes.number,\n  onPreviousStep: PropTypes.func,\n  onNextStep: PropTypes.func,\n  onSubmit: PropTypes.func,\n  validators: PropTypes.array,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n};\n\nButtonsList.displayName = \"ButtonsList\";\n\nexport default ButtonsList;\n","const PreviousButton = () => null;\n\nPreviousButton.displayName = \"PreviousButton\";\n\nexport default PreviousButton;\n","const NextButton = () => null;\n\nNextButton.displayName = 'NextButton';\n\nexport default NextButton;","const SubmitButton = () => null;\n\nSubmitButton.displayName = \"SubmitButton\";\n\nexport default SubmitButton;\n","import { Formik } from \"formik\";\nimport Wizard from \"./Wizard\";\nimport StepsList from \"./StepsList\";\nimport Step from \"./Step\";\nimport ButtonsList from \"./ButtonsList\";\nimport PreviousButton from \"./PreviousButton\";\nimport NextButton from \"./NextButton\";\nimport SubmitButton from \"./SubmitButton\";\n\nfunction App({ components, initialValues, onSubmit, ...props }) {\n  return (\n    <Formik initialValues={initialValues}>\n      {(formik) => {\n        const getValidators = (validatorFuncs) =>\n          validatorFuncs.map((func) => () => func({ ...formik }));\n        return (\n          <Wizard onSubmit={onSubmit} initialValues={initialValues} {...formik} {...props}>\n            <StepsList\n              validators={getValidators(components.map(({ validate }) => validate || (() => true)))}\n            >\n              {components.map((c) => (\n                <Step key={c.title} component={c}></Step>\n              ))}\n            </StepsList>\n            <ButtonsList {...formik}>\n              <PreviousButton />\n              <NextButton />\n              <SubmitButton />\n            </ButtonsList>\n          </Wizard>\n        );\n      }}\n      {/* <DisplayFormikState {...props} /> */}\n    </Formik>\n  );\n}\n\n// const WithFormikApp = withFormik(App);\n\nexport default App;\n","import { Transfer } from \"antd\";\nimport { filterParticipants } from \"../../../utils/common\";\nimport { produce } from \"immer\";\n\nconst filterObject = (participants, filterKey) =>\n  filterParticipants(participants, { filter: { [filterKey]: true } }).map(([name]) => name);\n\nconst participantChangeHandler = (draft, options) => {\n  options.forEach(({ keys, action }) => {\n    const keySet = new Set(keys);\n    Object.entries(draft.participants).forEach(([name, obj]) => {\n      const included = keySet.has(name);\n      if (obj[action] !== included) {\n        draft.participants[name][action] = included;\n      }\n    });\n  });\n};\n\nconst SelectParticipants = ({ formik }) => {\n  const { participants } = formik.values;\n\n  const onChange = (nextTargetKeys) => {\n    formik.setValues(\n      produce(formik.values, (draft) => {\n        participantChangeHandler(draft, [\n          { keys: [], action: \"selected\" },\n          { keys: nextTargetKeys, action: \"targeted\" },\n        ]);\n      })\n    );\n  };\n\n  const onSelectChange = (sourceSelectedKeys, targetSelectedKeys) => {\n    const selectedKeys = [...sourceSelectedKeys, ...targetSelectedKeys];\n    formik.setValues(\n      produce(formik.values, (draft) => {\n        participantChangeHandler(draft, [{ keys: selectedKeys, action: \"selected\" }]);\n      })\n    );\n  };\n\n  return (\n    <>\n      <Transfer\n        dataSource={Object.values(participants)}\n        titles={[\"未訂餐\", \"有要訂餐\"]}\n        targetKeys={filterObject(participants, \"targeted\")}\n        selectedKeys={filterObject(participants, \"selected\")}\n        onChange={onChange}\n        onSelectChange={onSelectChange}\n        render={(item) => item.name}\n      ></Transfer>\n    </>\n  );\n};\n\nSelectParticipants.validate = (formik) => {\n  const errors = {};\n  const errorMsgs = [];\n  const { participants } = formik.values;\n  if (filterParticipants(participants).length < 2) {\n    errorMsgs.push(\"至少需選取2個訂餐人\");\n  }\n\n  if (errorMsgs.length > 0) {\n    errors.errorMsgs = errorMsgs;\n  }\n\n  return errors;\n};\n\nSelectParticipants.title = \"請選擇參與訂餐人\";\n\nexport default SelectParticipants;\n","import styled from \"styled-components\";\n\nimport { FastField } from \"formik\";\nimport colors from \"../../utils/colors\";\n\nconst StyledFastField = styled(FastField)`\n  outline: none;\n  cursor: pointer;\n  width: 155px;\n  height: 36px;\n  border-radius: 2px;\n  border: 1px\n    ${({ errors, touched }) => {\n      return errors && touched ? \"red\" : colors.getGray(0.2);\n    }}\n    solid;\n  padding-left: 4px;\n  font-size: ${(props) => props.fontSize}px;\n  transition: 0.2s ease-in-out;\n  &:hover {\n    border: 1px ${colors.getGray(0.25)} solid;\n    background-color: ${colors.getGray(0.15)};\n  }\n  /* &:focus {\n    background-color: ${colors.white};\n    border: 1px ${colors.primaryBackgroundLight} solid;\n  } */\n  ::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n  ::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n`;\n\nconst Field = ({ type = \"number\", ...props }) => (\n  <StyledFastField type={type} {...props}></StyledFastField>\n);\n\nexport default Field;\n","import { Typography } from \"antd\";\nimport styled from \"styled-components\";\n\nconst StyledText = styled(Typography.Text)`\n  font-size: ${(props) => props?.size}px;\n`;\n\nconst Text = ({ size = 16, children }) => {\n  return <StyledText size={size}>{children}</StyledText>;\n};\n\nexport default Text;\n","import styled from \"styled-components\";\n\nimport Field from \"./Field\";\nimport Text from \"../../components/Text\";\n\nconst Wrapper = styled.div`\n  width: ${(props) => props.width}px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n  & > * {\n    display: flex;\n  }\n`;\n\nconst InputItem = (props) => {\n  const { text = \"\", width = 275 } = props;\n  return (\n    <Wrapper width={width}>\n      {text === \"\" ? <></> : <Text>{text}</Text>}\n      <Field {...props}></Field>\n    </Wrapper>\n  );\n};\n\nexport default InputItem;\n","import Input from \"../../../components/Input\";\nimport { filterParticipants } from \"../../../utils/common\";\n\nconst RecordCost = ({ formik }) => {\n  const { participants } = formik.values;\n\n  return (\n    <>\n      {filterParticipants(participants).map(([name]) => {\n        return (\n          <Input\n            name={`participants[${name}].cost`}\n            key={name}\n            text={name}\n            value={formik?.values?.participants?.[name]?.cost}\n            onChange={formik.handleChange}\n            onBlur={formik.handleBlur}\n            touched={formik?.touched?.participants?.[name]}\n            errors={formik.errors[name]}\n            placeholder=\"enter somthing\"\n          ></Input>\n        );\n      })}\n    </>\n  );\n};\n\nRecordCost.validate = (formik) => {\n  const errors = {};\n  const errorMsgs = [];\n  const { participants } = formik.values;\n  const existUnfilled =\n    filterParticipants(participants, { filter: { targeted: true, cost: \"\" } }).length > 0;\n\n  if (existUnfilled) {\n    errorMsgs.push(\"需填寫所有訂餐人金額。若沒有訂餐請回上一步移除訂餐人。\");\n  }\n\n  if (errorMsgs.length > 0) {\n    errors.errorMsgs = errorMsgs;\n  }\n  return errors;\n};\n\nRecordCost.title = \"請輸入訂餐金額\";\n\nexport default RecordCost;\n","import { produce } from \"immer\";\nimport { Radio, Space } from \"antd\";\n\nimport { filterParticipants } from \"../../../utils/common\";\n\nconst SelectPayer = ({ formik }) => {\n  const { participants, payer } = formik.values;\n  return (\n    <>\n      <Radio.Group\n        buttonStyle=\"solid\"\n        value={payer}\n        onChange={(e) => {\n          formik.setValues(\n            produce(formik.values, (draft) => {\n              draft.payer = e.target.value;\n            })\n          );\n        }}\n      >\n        <Space direction=\"vertical\">\n          {filterParticipants(participants).map(([name]) => (\n            <Radio.Button key={name} value={name}>\n              {name}\n            </Radio.Button>\n          ))}\n        </Space>\n      </Radio.Group>\n    </>\n  );\n};\n\nSelectPayer.validate = (formik) => {\n  const errors = {};\n  const errorMsgs = [];\n  const { payer, participants } = formik.values;\n\n  if (!payer || !participants[payer].targeted) {\n    errorMsgs.push(\"請選擇付款人\");\n  }\n\n  if (errorMsgs.length > 0) {\n    errors.errorMsgs = errorMsgs;\n  }\n  return errors;\n};\n\nSelectPayer.title = \"請選擇付款人\";\n\nexport default SelectPayer;\n","import { produce } from \"immer\";\n\nimport Input from \"../../../components/Input\";\n\nconst SelectPayer = ({ formik }) => {\n  const { delivery, discount, note } = formik.values;\n  return (\n    <div>\n      <Input\n        text=\"運費\"\n        value={delivery?.fee || \"\"}\n        onChange={(e) => {\n          const { value } = e.target;\n          const fee = value === \"\" ? value : +value;\n          formik.setValues(\n            produce(formik.values, (draft) => {\n              draft.delivery.fee = fee;\n            })\n          );\n        }}\n        placeholder=\"請輸入運費\"\n      ></Input>\n      <Input\n        text=\"優惠\"\n        value={discount?.amount || \"\"}\n        onChange={(e) => {\n          const { value } = e.target;\n          const amount = value === \"\" ? value : +value;\n          formik.setValues(\n            produce(formik.values, (draft) => {\n              draft.discount.amount = amount;\n            })\n          );\n        }}\n        placeholder=\"請輸入優惠\"\n      ></Input>\n      <Input\n        type=\"text\"\n        text=\"備註\"\n        value={note || \"\"}\n        onChange={(e) => {\n          const { value } = e.target;\n          formik.setValues(\n            produce(formik.values, (draft) => {\n              draft.note = value;\n            })\n          );\n        }}\n      ></Input>\n    </div>\n  );\n};\n\nSelectPayer.title = \"其他選項\";\n\nexport default SelectPayer;\n","import { Table, Typography, Tooltip } from \"antd\";\nimport { CrownTwoTone } from \"@ant-design/icons\";\n\nimport { filterParticipants, fixNumber } from \"../../../utils/common\";\nimport colors from \"../../../utils/colors\";\n\nconst arrangeValues = (values) => {\n  const {\n    delivery: { fee: deliveryFee = 0 },\n    discount: { amount: discountAmount = 0 },\n    participants = {},\n    payer = \"\",\n  } = values;\n  const filteredParticipants = filterParticipants(participants);\n  const totalAmount = filteredParticipants.reduce((acc, [_, { cost }]) => acc + cost, 0);\n  const participantCount = filteredParticipants.length;\n  const totalSharedFee = deliveryFee - discountAmount;\n  const sharedFee = fixNumber(totalSharedFee / participantCount);\n  const columns = [\n    {\n      title: \"訂餐人\",\n      dataIndex: \"name\",\n      key: \"name\",\n      render: (text) => (\n        <Tooltip title={payer === text ? \"付款人\" : null}>\n          <Typography.Text strong>\n            {payer === text && <CrownTwoTone twoToneColor={colors.mark} />}\n            {text}\n          </Typography.Text>\n        </Tooltip>\n      ),\n    },\n\n    {\n      title: \"金額\",\n      dataIndex: \"cost\",\n      key: \"cost\",\n      render: (cost) => (\n        <Tooltip title={`${cost} ${sharedFee >= 0 ? \"+\" : \"-\"} ${Math.abs(sharedFee)}`}>\n          <Typography.Link target=\"_blank\">{fixNumber(cost + sharedFee)}</Typography.Link>\n        </Tooltip>\n      ),\n    },\n  ];\n  const dataSource = filteredParticipants.map(([name, { cost }]) => ({\n    key: name,\n    name,\n    cost,\n  }));\n  return {\n    discountAmount,\n    totalAmount,\n    deliveryFee,\n    totalSharedFee,\n    participantCount,\n    sharedFee,\n    dataSource,\n    columns,\n  };\n};\n\nconst ResultsPreview = ({ formik }) => {\n  const { values } = formik;\n  const {\n    discountAmount,\n    deliveryFee,\n    totalAmount,\n    totalSharedFee,\n    participantCount,\n    sharedFee,\n    dataSource,\n    columns,\n  } = arrangeValues(values);\n  const { note } = values;\n  return (\n    <>\n      <Typography.Text strong>{sharedFee < 0 ? \"共享優惠\" : \"共同分擔\"}：</Typography.Text>\n      <Tooltip title={`運費：${deliveryFee}，優惠：${discountAmount}`}>\n        <Typography.Link target=\"_blank\">{Math.abs(totalSharedFee)}</Typography.Link>\n      </Tooltip>{\" \"}\n      ÷ {participantCount} = {Math.abs(sharedFee)}\n      <br></br>\n      <Typography.Text strong>備註：</Typography.Text>\n      {note ? note : <Typography.Text type=\"secondary\">無備註</Typography.Text>}\n      <Table\n        scroll={{ y: 300 }}\n        size=\"small\"\n        pagination={false}\n        columns={columns}\n        dataSource={dataSource}\n        summary={() => (\n          <Table.Summary fixed>\n            <Table.Summary.Row>\n              <Table.Summary.Cell index={0}>總額</Table.Summary.Cell>\n              <Table.Summary.Cell index={1}>{totalAmount + totalSharedFee}</Table.Summary.Cell>\n            </Table.Summary.Row>\n          </Table.Summary>\n        )}\n      ></Table>\n    </>\n  );\n};\n\nResultsPreview.title = \"結果預覽\";\n\nexport default ResultsPreview;\n","import Modal from \"../../../components/Modal\";\n\nimport FormikWizard from \"../../../components/FormikWizard\";\n\nimport SelectParticipants from \"./SelectParticipants\";\nimport RecordCost from \"./RecordCost\";\nimport SelectPayer from \"./SelectPayer\";\nimport RecordOtherStuff from \"./RecordOtherStuff\";\nimport ResultsPreview from \"./ResultsPreview\";\n\nconst components = [SelectParticipants, RecordCost, SelectPayer, RecordOtherStuff, ResultsPreview];\n\nconst App = ({ initialValues, button, buttonTitle = \"新增一筆記錄\", onSubmit }) => (\n  <Modal button={button} buttonTitle={buttonTitle}>\n    <FormikWizard\n      initialValues={initialValues}\n      components={components}\n      onSubmit={onSubmit}\n    ></FormikWizard>\n  </Modal>\n);\n\nexport default App;\n","import React, { useState, Children, cloneElement, useEffect } from \"react\";\nimport { Popconfirm } from \"antd\";\n\nconst _Popconfirm = ({ children, popconfirmTitle = \"title\", onConfirm, ...props }) => {\n  const [visible, setVisible] = useState(false);\n  const [confirmLoading, setConfirmLoading] = useState(false);\n\n  useEffect(\n    () => () => {\n      setVisible(null);\n      setConfirmLoading(null);\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n\n  const showPopconfirm = () => {\n    setVisible(true);\n  };\n\n  const handleOk = async () => {\n    setConfirmLoading(true);\n    await onConfirm();\n    setVisible(false);\n    setConfirmLoading(false);\n  };\n\n  const handleCancel = () => {\n    setVisible(false);\n  };\n\n  return (\n    <>\n      <Popconfirm\n        title={popconfirmTitle}\n        visible={visible}\n        onConfirm={handleOk}\n        okButtonProps={{ loading: confirmLoading }}\n        onCancel={handleCancel}\n        onVisibleChange={(visible) => {\n          if (!visible) {\n            setVisible(false);\n          }\n        }}\n      >\n        {Children.map(children, (child) =>\n          cloneElement(child, {\n            onClick: showPopconfirm,\n            ...props,\n          })\n        )}\n      </Popconfirm>\n    </>\n  );\n};\n\nexport default _Popconfirm;\n","import styled from \"styled-components\";\n\nconst StyledButton = styled.button`\n  outline: none;\n  border: none;\n  background-color: transparent;\n  box-shadow: rgba(99, 99, 99, 0.2) 0px 0px 8px 0px;\n  cursor: pointer;\n  margin: 20px;\n  border-radius: 4px;\n  transition: 1.9s cubic-bezier(0.075, 0.82, 0.165, 1);\n  margin: 4px;\n  &:hover {\n    box-shadow: rgba(20, 20, 20, 0.4) 0px 0px 13px 2px;\n  }\n  &:active {\n    box-shadow: rgba(99, 99, 99, 0.2) 0px 0px 4px 0px;\n    background-color: rgba(99, 99, 99, 0.2);\n  }\n`;\n\nconst IconButton = ({ children, ...props }) => {\n  return <StyledButton {...props}>{children}</StyledButton>;\n};\n\nexport default IconButton;\n","import moment from \"moment\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Table, Tooltip } from \"antd\";\nimport { DeleteTwoTone, EditTwoTone } from \"@ant-design/icons\";\n\nimport { removeRecord, updateRecord } from \"../../actions/recordAction\";\nimport { fixNumber } from \"../../utils/common\";\n\nimport { filterParticipants } from \"../../utils/common\";\nimport AddNewRecordModal from \"../_common/CURDRecordModal\";\n\nimport Popconfirm from \"../../components/Popconfirm\";\nimport IconButton from \"../../components/IconButton\";\n\nconst generateColumns = (events) => {\n  const totalCostAmount = generateTotalCostAmount(events);\n  const participants = Object.keys(totalCostAmount).map((participant) => {\n    return {\n      title: participant,\n      render: (cost) => cost || 0,\n      children: [\n        {\n          title: fixNumber(totalCostAmount[participant]),\n          dataIndex: participant,\n          key: participant,\n        },\n      ],\n    };\n  });\n  participants.sort((a, b) => a.children[0].title - b.children[0].title);\n  return [\n    {\n      title: \"日期\",\n      dataIndex: \"date\",\n      key: \"date\",\n    },\n    { title: \"付款人\", dataIndex: \"payer\", key: \"payer\" },\n    { title: \"運費\", dataIndex: \"deliveryFee\", key: \"deliveryFee\" },\n    { title: \"優惠\", dataIndex: \"discountAmount\", key: \"discountAmount\" },\n    ...participants,\n    { title: \"總額\", dataIndex: \"totalAmount\", key: \"totalAmount\" },\n    { title: \"備註\", dataIndex: \"note\", key: \"note\" },\n    { title: \"Action\", dataIndex: \"action\", key: \"action\", width: \"100px\" },\n  ];\n};\n\nconst generateDataSource = (events, dispatch) => {\n  return events.map((event, i) => {\n    const { date, participants, payer, delivery, discount, note, id } = event;\n    const deliveryFee = delivery?.fee || 0;\n    const discountAmount = discount?.amount || 0;\n    return {\n      key: `${i + 1}`,\n      date: moment(date).format(\"M / D\"),\n      payer,\n      discountAmount,\n      ...filterParticipants(participants).reduce(\n        (acc, [name, obj]) => ({\n          ...acc,\n          ...{ [name]: obj?.cost || 0 },\n        }),\n        {}\n      ),\n      deliveryFee,\n      totalAmount: filterParticipants(participants).reduce(\n        (acc, [_, { cost = 0 }]) => acc + cost,\n        deliveryFee - discountAmount\n      ),\n      note,\n      action: (\n        <div>\n          <AddNewRecordModal\n            initialValues={event}\n            button={\n              <Tooltip title=\"編輯此筆記錄\" placement=\"bottomLeft\">\n                <IconButton>\n                  <EditTwoTone twoToneColor=\"#5b0\" />\n                </IconButton>\n              </Tooltip>\n            }\n            onSubmit={(record) => {\n              dispatch(updateRecord(record.id, record));\n            }}\n          >\n            Update\n          </AddNewRecordModal>\n          <Popconfirm\n            popconfirmTitle=\"即將刪除此筆記錄\"\n            onConfirm={() => dispatch(removeRecord(id))}\n          >\n            <Tooltip title=\"刪除此筆記錄\" placement=\"bottomLeft\">\n              <IconButton>\n                <DeleteTwoTone twoToneColor=\"#f50\" />\n              </IconButton>\n            </Tooltip>\n          </Popconfirm>\n        </div>\n      ),\n    };\n  });\n};\n\nconst generateTotalCostAmount = (events) =>\n  events.reduce((acc, { participants, payer, delivery, discount }) => {\n    if (Object.keys(participants).length === 0) {\n      return acc;\n    }\n    const deliveryFee = delivery?.fee || 0;\n    const discountAmount = discount?.amount || 0;\n    const initValue = deliveryFee - discountAmount;\n    const participantEntries = filterParticipants(participants);\n    const averageDeliveryFee = initValue / participantEntries.length;\n    let totalAmount = initValue;\n    participantEntries.forEach(([name, { cost = 0 }]) => {\n      acc[name] = (acc[name] || 0) - cost - averageDeliveryFee;\n      totalAmount += cost;\n    });\n    acc[payer] += totalAmount;\n    return acc;\n  }, {});\n\nconst DataTable = () => {\n  const dispatch = useDispatch();\n  const records = useSelector((state) => state.records);\n  const columns = generateColumns(records);\n  const dataSource = generateDataSource(records, dispatch);\n  return <Table dataSource={dataSource} columns={columns} pagination={{ pageSize: 4 }}></Table>;\n};\nexport default DataTable;\n","import styled from \"styled-components\";\nimport { Button as _Button } from \"antd\";\n\nconst StyledButton = styled(_Button)`\n`;\n\nconst Button = (props) => {\n  return <StyledButton {...props}>{props.children}</StyledButton>;\n};\n\nexport default Button;\n","import * as yup from \"yup\";\nimport styled from \"styled-components\";\nimport { Select } from \"antd\";\nimport { Formik, Form, ErrorMessage } from \"formik\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { addUser } from \"../../actions/userAction\";\nimport Modal from \"../../components/Modal\";\nimport Input from \"../../components/Input\";\nimport Button from \"../../components/Button\";\n\nconst { Option } = Select;\n\nconst Wrapper = styled.div`\n  margin-top: 24px;\n`;\n\nconst AddUserModal = () => {\n  const users = useSelector((state) => state.users);\n  const dispatch = useDispatch();\n  return (\n    <Modal buttonTitle=\"新增使用者\" title=\"新增使用者\">\n      <Formik\n        initialValues={{ userName: \"\" }}\n        validationSchema={() =>\n          yup.object().shape({\n            userName: yup.string().required(\"必須填寫使用者名稱\"),\n          })\n        }\n      >\n        {(formik) => {\n          const {\n            values: { userName },\n          } = formik;\n          return (\n            <Form>\n              <Wrapper>\n                <Input\n                  type=\"text\"\n                  text=\"使用者名稱\"\n                  name=\"userName\"\n                  onChange={formik.handleChange}\n                  onBlur={formik.handleBlur}\n                ></Input>\n                <ErrorMessage name=\"userName\"></ErrorMessage>\n              </Wrapper>\n              <Wrapper>\n                <Select style={{ width: 150 }}>\n                  {Object.entries(users).map(([name]) => (\n                    <Option key={name}>{name}</Option>\n                  ))}\n                </Select>\n              </Wrapper>\n              <Wrapper>\n                <Button\n                  type=\"primary\"\n                  onClick={() => {\n                    dispatch(addUser({ userName }));\n                  }}\n                >\n                  新增使用者\n                </Button>\n              </Wrapper>\n            </Form>\n          );\n        }}\n      </Formik>\n    </Modal>\n  );\n};\n\nexport default AddUserModal;\n","import CURDRecordModal from \"../_common/CURDRecordModal\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { addNewRecord } from \"../../actions/recordAction\";\nimport { genNewRecordObject } from \"../../utils/common\";\n\nconst AddNewRecordModal = () => {\n  const users = useSelector((state) => state.users);\n\n  const initNewRecord = genNewRecordObject(users);\n  const dispatch = useDispatch();\n\n  return (\n    <CURDRecordModal\n      initialValues={initNewRecord}\n      buttonTitle=\"新增一筆資料\"\n      onSubmit={(record) => {\n        dispatch(addNewRecord(record));\n      }}\n    ></CURDRecordModal>\n  );\n};\n\nexport default AddNewRecordModal;\n","import AddUserModal from \"./AddUserModal\";\nimport AddNewRecordModal from \"./AddNewRecordModal\";\n\nconst Panel = () => {\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        height: \"50px\",\n        alignItems: \"center\",\n        justifyContent: \"flex-end\",\n      }}\n    >\n      <AddUserModal></AddUserModal>\n      <AddNewRecordModal></AddNewRecordModal>\n    </div>\n  );\n};\nexport default Panel;\n","import { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { fetchAllRecords } from \"./actions/recordAction\";\nimport { fetchAllUsers } from \"./actions/userAction\";\nimport DataTable from \"./containers/DataTable\";\nimport Panel from \"./containers/Panel\";\n\nconst App = () => {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(fetchAllRecords());\n    dispatch(fetchAllUsers());\n  }, [dispatch]);\n\n  return (\n    <>\n      <Panel></Panel>\n      <DataTable></DataTable>\n    </>\n  );\n};\nexport default App;\n","import {\n  RECORDS__LOAD_ALL_RECORD,\n  RECORDS__ADD_RECORD,\n  RECORDS__UPDATE_RECORD,\n  RECORDS__REMOVE_RECORD,\n} from \"../actions/recordAction\";\nconst initialState = [];\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case RECORDS__ADD_RECORD:\n      return [action.payload, ...state];\n    case RECORDS__LOAD_ALL_RECORD:\n      return [...action.payload];\n    case RECORDS__UPDATE_RECORD: {\n      const { recordId, updatedRecord } = action.payload;\n      return state.map((s) => (s.id === recordId ? updatedRecord : s));\n    }\n\n    case RECORDS__REMOVE_RECORD:\n      return state.filter(({ id }) => id !== action.payload.recordId);\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import { USER__LOAD_ALL_USERS, USER__ADD_USER } from \"../actions/userAction\";\nconst initialState = {};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case USER__LOAD_ALL_USERS:\n      return { ...action.payload };\n    case USER__ADD_USER:\n      return { ...state, [action.payload.name]: { ...action.payload } };\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import { createStore, applyMiddleware } from \"redux\";\nimport records from \"./reducers/recordReducer\";\nimport users from \"./reducers/userReducer\";\n\nimport thunkMiddleware from \"redux-thunk\";\nimport { combineReducers } from \"redux\";\nimport { createLogger } from \"redux-logger\";\n\nconst loggerMiddleware = createLogger();\n\nconst store = createStore(\n  combineReducers({\n    records,\n    users,\n  }),\n  applyMiddleware(thunkMiddleware, loggerMiddleware)\n);\n\nexport default store;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport \"antd/dist/antd.css\";\nimport App from \"./App\";\n// import reportWebVitals from \"./reportWebVitals\";\nimport store from \"./store\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}