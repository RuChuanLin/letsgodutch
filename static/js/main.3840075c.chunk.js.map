{"version":3,"sources":["firebase/init.js","firebase/index.js","redux/utils/actionCreator.js","redux/record/action.js","redux/user/action.js","utils/common.js","components/Modal.js","components/FormikWizard/Wizard.js","components/FormikWizard/StepsList.js","components/FormikWizard/Step.js","utils/colors.js","components/FormikWizard/Button.js","components/FormikWizard/ButtonsList.js","components/FormikWizard/PreviousButton.js","components/FormikWizard/NextButton.js","components/FormikWizard/SubmitButton.js","components/FormikWizard/index.js","containers/_common/CURDRecordModal/SelectParticipants.js","components/_wrapper/FieldWrapper.js","components/Input/Field.js","components/Text/index.js","components/Input/index.js","containers/_common/CURDRecordModal/RecordCost.js","containers/_common/CURDRecordModal/SelectPayer.js","containers/_common/CURDRecordModal/RecordOtherStuff.js","containers/_common/CURDRecordModal/ResultsPreview.js","containers/_common/CURDRecordModal/index.js","components/Popconfirm.js","components/IconButton/index.js","containers/DataTable/index.js","components/Button/index.js","containers/Panel/AddUserModal.js","containers/Panel/AddNewRecordModal.js","components/FormikField/index.js","components/FormikSelect/index.js","containers/_common/TransferMoneyModal/RecordInfo.js","containers/_common/TransferMoneyModal/index.js","containers/Panel/TransferMoney.js","containers/Panel/index.js","App.js","redux/utils/reducerHandler.js","redux/record/reducer.js","redux/user/reducer.js","utils/dbApiUnification.js","redux/user/saga.js","redux/record/saga.js","redux/rootSaga.js","redux/store.js","index.js"],"names":["urlSearchParams","URLSearchParams","window","location","search","configs","Object","fromEntries","entries","db","apiKey","authDomain","projectId","firebase","initializeApp","firestore","e","Localbase","getRecordDB","collection","getUserDB","actionCreator","action","reduce","acc","value","type","toLowerCase","data","httpState","loadAllRecordsActions","addNewRecordActions","updateRecordActions","removeRecordActions","loadAllRecords","request","addNewRecord","updateRecord","removeRecord","loadAllUsersActions","addUserActions","loadAllUsers","addUser","filterParticipants","memoIniObject","memoFinishedObject","memoIniOptionsObject","participantObject","options","filter","targeted","participant","every","key","genNewRecordObject","memoInitUsers","memoFinishedNewRecord","users","delivery","fee","discount","amount","participants","keys","name","selected","cost","payer","fixNumber","number","fixDigit","nPowerOf10","Math","round","Number","EPSILON","StyledButton","styled","Button","StyledModal","Modal","CustomModal","button","buttonTitle","okFunction","loading","children","useState","isModalVisible","setIsModalVisible","showModal","cloneElement","onClick","visible","onOk","onCancel","footer","centered","style","overflow","maxWidth","spinning","Children","map","child","getTotalSteps","reactChildren","React","toArray","displayName","props","length","Error","Wizard","onSubmit","activeStepIndex","totalSteps","stepTabs","direction","state","setState","onPreviousStep","produce","draftState","onNextStep","submitHandler","values","setValues","initialValues","draft","updateStepTabs","stepsComponent","buttonsListComponent","validators","forEach","getInitialComponents","Wrapper","div","StepsList","useEffect","title","push","formik","index","isActive","getStepChildren","getX","actionPara","Step","component","y","useTransition","enter","x","opacity","from","leave","transition","item","position","Title","level","primaryBackground","primaryBackgroundDark","chroma","darken","hex","primaryBackgroundLight","brighten","white","colors","mark","error","getGray","scale","getbalanceColor","balance","red","green","domain","WizardButton","show","label","validator","errorMsgs","call","tooltipVisible","setTooltipVisible","disabledNext","disabled","color","onVisibleChange","defaultProps","ButtonsList","RocketOutlined","PreviousButton","NextButton","SubmitButton","App","components","validationSchema","validatorFuncs","validate","func","c","filterObject","filterKey","participantChangeHandler","keySet","Set","obj","included","has","SelectParticipants","dataSource","titles","targetKeys","selectedKeys","onChange","nextTargetKeys","onSelectChange","sourceSelectedKeys","targetSelectedKeys","render","errors","Text","Typography","width","FieldWrapper","text","StyledFastField","FastField","touched","fontSize","Field","size","InputItem","RecordCost","Input","handleChange","onBlur","handleBlur","placeholder","SelectPayer","Group","buttonStyle","target","note","ResultsPreview","deliveryFee","discountAmount","filteredParticipants","totalAmount","participantCount","totalSharedFee","sharedFee","columns","dataIndex","strong","CrownTwoTone","twoToneColor","abs","Link","arrangeValues","scroll","pagination","summary","Summary","fixed","Row","Cell","RecordOtherStuff","CURDRecordModal","FormikWizard","_Popconfirm","popconfirmTitle","onConfirm","setVisible","confirmLoading","setConfirmLoading","showPopconfirm","handleOk","a","okButtonProps","IconButton","BalanceSpan","span","generateDataSource","records","dispatch","record","i","date","id","sharingFee","arrangedParticipants","moment","format","volcano","margin","placement","EditTwoTone","recordId","updatedRecord","Popconfirm","removingId","DeleteTwoTone","genDefaultRecord","generateTotalCostAmount","events","initValue","participantEntries","averageDeliveryFee","DataTable","useDispatch","useSelector","totalCostAmount","background","sort","b","ellipsis","showTitle","generateColumns","pageSize","_Button","Option","Select","AddUserModal","userName","yup","shape","required","AddNewRecordModal","initNewRecord","FormikField","fast","restProps","FormikSelect","field","form","setFieldValue","setFieldTouched","option","undefined","payee","transferAmount","showSearch","optionFilterProp","filterOption","input","indexOf","TransferMoneyModal","addNecessaryAttributions","TransferMoney","userObject","initNewTransferRecord","resultRecord","console","log","Panel","display","height","alignItems","justifyContent","Header","Layout","Content","Footer","Sider","className","padding","borderRadius","textAlign","reducerHandler","initialState","reducer","REQUEST","SUCCESS","FAILURE","snapshots2Docs","snapshots","docs","snapshot2Data","snapshot","recordSaga","get","cur","put","success","failure","select","nanoid","valueOf","doc","set","all","takeLatest","orderBy","allRecords","newRecord","arrangedRecord","delete","rootSaga","userSaga","loggerMiddleware","createLogger","sagaMiddleare","createSagaMiddleware","store","createStore","combineReducers","applyMiddleware","run","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.3840075c.chunk.js","sourcesContent":["import firebase from \"firebase\";\nimport Localbase from \"localbase\";\nimport \"firebase/database\";\n// import configs from \"./configs\";\n\nconst urlSearchParams = new URLSearchParams(window.location.search);\nconst configs = Object.fromEntries(urlSearchParams.entries());\n\nlet db = null;\nif (configs.apiKey && configs.authDomain && configs.projectId) {\n  try {\n    firebase.initializeApp(configs);\n    db = firebase.firestore();\n  } catch (e) {\n    db = new Localbase(\"db\");\n  }\n} else {\n  db = new Localbase(\"db\");\n}\n\nexport default db;\n","import firebase from \"./init\";\n\nexport const getRecordDB = () => firebase.collection(\"records\");\nexport const getUserDB = () => firebase.collection(\"users\");\n","/*\n  Use this helper function to generate actions and types automatically\n  This will return a object generating 3 actions and 3 types:\n  {\n    FAILURE: \"GET_USERS_LIST_FAILURE\",\n    SUCCESS: \"GET_USERS_LIST_SUCCESS\",\n    REQUEST: \"GET_USERS_LIST_REQUEST\",\n    failure: payload => ({ type, payload, }), // type: GET_USERS_LIST_FAILURE\n    success: payload => ({ type, payload, }), // type: GET_USERS_LIST_SUCCESS\n    request: payload => ({ type, payload, }), // type: GET_USERS_LIST_REQUEST\n  }\n*/\nconst actionCreator = (action) => {\n  const values = [\"SUCCESS\", \"FAILURE\", \"REQUEST\"];\n  const types = values.reduce((acc, value) => {\n    const type = `${action}_${value}`;\n    acc[value] = type;\n    acc[value.toLowerCase()] = (data) => ({\n      type,\n      data,\n      httpState: value,\n    });\n    return acc;\n  }, {});\n  return types;\n};\n\nexport default actionCreator;\n","import { getRecordDB } from \"../../firebase\";\nimport actionCreator from \"../utils/actionCreator\";\n\nexport const loadAllRecordsActions = actionCreator(\"RECORDS__LOAD_ALL_RECORD\");\nexport const addNewRecordActions = actionCreator(\"RECORDS__ADD_RECORD\");\nexport const updateRecordActions = actionCreator(\"RECORDS__UPDATE_RECORD\");\nexport const removeRecordActions = actionCreator(\"RECORDS__REMOVE_RECORD\");\n\nexport const { request: loadAllRecords } = loadAllRecordsActions;\nexport const { request: addNewRecord } = addNewRecordActions;\nexport const { request: updateRecord } = updateRecordActions;\nexport const { request: removeRecord } = removeRecordActions;\n\n","import actionCreator from \"../utils/actionCreator\";\n\nexport const loadAllUsersActions = actionCreator(\"USER__LOAD_ALL_USERS\");\nexport const addUserActions = actionCreator(\"USER__ADD_USER\");\n\nexport const { request: loadAllUsers } = loadAllUsersActions;\nexport const { request: addUser } = addUserActions;\n","/**\n * filter participants\n *\n * this project requires to filter out untargete or unselected participants frequently, so we need a independant funtion to deal with it.\n *\n * note: this function use a memorization to minimize the amount of calculation.\n */\nconst filterParticipants = (() => {\n  let [memoIniObject, memoFinishedObject] = [{}, []];\n  let [memoIniOptionsObject] = [{}];\n  return (\n    participantObject,\n    options = {\n      filter: { targeted: true },\n    }\n  ) => {\n    if (participantObject === memoIniObject && memoIniOptionsObject === options) {\n      return memoFinishedObject;\n    }\n    memoIniObject = participantObject;\n    memoIniOptionsObject = options;\n    memoFinishedObject = Object.entries(participantObject).filter((participant) =>\n      Object.entries(options.filter).every(([key, value]) => participant?.[1]?.[key] === value)\n    );\n    return memoFinishedObject;\n  };\n})();\n\nexport const genNewRecordObject = (() => {\n  let [memoInitUsers, memoFinishedNewRecord] = [{}, {}];\n  return (users) => {\n    if (users !== memoInitUsers) {\n      memoInitUsers = users;\n      memoFinishedNewRecord = {\n        delivery: {\n          fee: 0,\n        },\n        discount: {\n          amount: 0,\n        },\n        participants: Object.keys(users).reduce(\n          (acc, name) => ({\n            ...acc,\n            [name]: { key: name, name, targeted: true, selected: false, cost: \"\" },\n          }),\n          {}\n        ),\n        payer: \"\",\n      };\n    }\n    return memoFinishedNewRecord;\n  };\n})();\n\nconst fixNumber = (number, options = {}) => {\n  const { fixDigit = 2 } = options;\n  const nPowerOf10 = 10 ** fixDigit;\n  return Math.round((number + Number.EPSILON) * nPowerOf10) / nPowerOf10;\n};\nexport { filterParticipants, fixNumber };\n","import React, { useState, Children, cloneElement } from \"react\";\nimport { Modal, Button, Spin } from \"antd\";\nimport styled from \"styled-components\";\n\nconst StyledButton = styled(Button)`\n  color: #eee;\n  margin-right: 16px;\n  border-radius: 16px;\n  &:hover {\n    color: #fff;\n    background: rgba(255, 255, 255, 0.2);\n  }\n  &:active {\n    color: #fff;\n    background: rgba(255, 255, 255, 0.4);\n    box-shadow: rgba(255, 255, 255, 0.7) 0px 0px 8px 4px;\n  }\n  &:focus {\n    color: #eee;\n  }\n`;\n\nconst StyledModal = styled(Modal)`\n  &::-webkit-scrollbar {\n    display: none;\n  }\n`;\n\nconst CustomModal = ({\n  button,\n  buttonTitle = \"Open Modal\",\n  okFunction,\n  loading = false,\n  children,\n}) => {\n  const [isModalVisible, setIsModalVisible] = useState(false);\n\n  const showModal = () => {\n    setIsModalVisible(true);\n  };\n\n  const handleOk = () => {\n    okFunction();\n    setIsModalVisible(false);\n  };\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n  };\n\n  const clonedChildren = () =>\n    Children.map(children, (child) =>\n      cloneElement(child, {\n        isModalVisible,\n        setIsModalVisible,\n      })\n    );\n\n  return (\n    <>\n      {button ? (\n        cloneElement(button, {\n          onClick: showModal,\n        })\n      ) : (\n        <StyledButton loading={loading} type=\"text\" onClick={showModal}>\n          {buttonTitle}\n        </StyledButton>\n      )}\n      <StyledModal\n        visible={isModalVisible}\n        onOk={handleOk}\n        onCancel={handleCancel}\n        footer={null}\n        centered\n        style={{ overflow: \"auto\", maxWidth: \"448px\" }}\n      >\n        <Spin spinning={loading}>{clonedChildren()}</Spin>\n      </StyledModal>\n    </>\n  );\n};\n\nexport default CustomModal;\n","import React, { Children, cloneElement, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n// import StepTabs from \"./StepTabs\";\nimport { produce } from \"immer\";\n\nconst getTotalSteps = (children) => {\n  const reactChildren = React.Children.toArray(children);\n  for (const child of reactChildren) {\n    if (child.type.displayName === \"StepsList\") {\n      return child.props.children.length - 1;\n    }\n  }\n  throw new Error(\"Require StepsList\");\n};\n\nconst Wizard = ({ children, onSubmit, ...props }) => {\n  const [state, setState] = useState({\n    activeStepIndex: 0,\n    totalSteps: getTotalSteps(children),\n    stepTabs: [],\n    direction: 0,\n  });\n\n  const onPreviousStep = () =>\n    setState(\n      produce(state, (draftState) => {\n        draftState.activeStepIndex = state.activeStepIndex - 1;\n        draftState.direction = -1;\n      })\n    );\n\n  const onNextStep = () =>\n    setState(\n      produce(state, (draftState) => {\n        draftState.activeStepIndex = state.activeStepIndex + 1;\n        draftState.direction = 1;\n      })\n    );\n\n  const submitHandler = onSubmit\n    ? () => {\n        onSubmit(props.values);\n        props.setIsModalVisible(false);\n        props.setValues(props.initialValues);\n        setState(\n          produce(state, (draft) => {\n            draft.activeStepIndex = 0;\n            draft.direction = 0;\n          })\n        );\n      }\n    : () => {};\n\n  const updateStepTabs = (stepTabs) =>\n    setState(\n      produce(state, (draftState) => {\n        draftState.stepTabs = stepTabs;\n      })\n    );\n\n  const getInitialComponents = () => {\n    let stepsComponent = null;\n    let buttonsListComponent = null;\n    let validators = [];\n\n    Children.forEach(children, (child) => {\n      if (child.type.displayName === \"StepsList\") {\n        stepsComponent = cloneElement(child, {\n          activeStepIndex: state.activeStepIndex,\n          updateStepTabs: updateStepTabs,\n          direction: state.direction,\n          ...props,\n        });\n        if (child.props.validators) {\n          // eslint-disable-next-line prefer-destructuring\n          validators = child.props.validators;\n        }\n      }\n      if (child.type.displayName === \"ButtonsList\") {\n        buttonsListComponent = cloneElement(child, {\n          activeStepIndex: state.activeStepIndex,\n          totalSteps: state.totalSteps,\n          submitHandler,\n\n          onNextStep,\n          onPreviousStep,\n          validators,\n          ...props,\n        });\n      }\n    });\n    return { stepsComponent, buttonsListComponent };\n  };\n\n  const { stepsComponent, buttonsListComponent } = getInitialComponents();\n\n  return (\n    <div>\n      {/* <StepTabs tabs={state.stepTabs} activeStepIndex={state.activeStepIndex} /> */}\n      {stepsComponent}\n      {buttonsListComponent}\n    </div>\n  );\n};\n\nWizard.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n};\n\nWizard.displayName = \"Wizard\";\n\nexport default Wizard;\n","import React, { Children, cloneElement, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\n\nconst Wrapper = styled.div`\n  position: relative;\n  height: 344px;\n`;\n\nconst StepsList = (props) => {\n  useEffect(() => {\n    const stepTabs = [];\n    Children.forEach(props.children, (child) => {\n      if (child.props.title) {\n        stepTabs.push({ title: child.props.title });\n      }\n    });\n    props.updateStepTabs(stepTabs); \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const getStepChildren = () => {\n    const { activeStepIndex, children, direction, ...formik } = props;\n    const stepTabs = [];\n    const newChildren = Children.map(children, (child, index) => {\n      if (child.props.title) {\n        stepTabs.push({ title: child.props.title });\n      }\n      return cloneElement(child, {\n        isActive: index === activeStepIndex,\n        formik,\n        direction,\n      });\n    });\n    return newChildren;\n  };\n\n  return <Wrapper>{getStepChildren()}</Wrapper>;\n};\n\nStepsList.propTypes = {\n  activeStepIndex: PropTypes.number,\n  updateStepTabs: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n};\n\nStepsList.displayName = \"StepsList\";\n\nexport default StepsList;\n","import PropTypes from \"prop-types\";\nimport { useTransition, animated } from \"react-spring\";\nimport { Typography } from \"antd\";\n\nconst getX = (direction, actionPara) => 300 * direction * actionPara;\n\nconst Step = ({ isActive, component, direction, ...props }) => {\n  const y = direction === 0 ? 50 : -20;\n  const transition = useTransition(isActive, {\n    enter: { x: 0, y: 0, opacity: 1 },\n    from: { x: getX(direction, 1), y, opacity: 0 },\n    leave: { x: getX(direction, -1), y, opacity: 0 },\n  });\n\n  return transition((style, item) =>\n    item ? (\n      <animated.div style={{ position: \"absolute\", ...style }}>\n        <Typography.Title level={3}>{component?.title}</Typography.Title>\n        {component(props)}\n      </animated.div>\n    ) : (\n      <></>\n    )\n  );\n};\n\nStep.propTypes = {\n  isActive: PropTypes.bool,\n  component: PropTypes.func,\n  direction: PropTypes.number,\n};\n\nStep.displayName = \"Step\";\n\nexport default Step;\n","import chroma from \"chroma-js\";\nimport {red, green} from '@ant-design/colors'\n\nconst primaryBackground = \"#1890ff\";\nconst primaryBackgroundDark = chroma(primaryBackground).darken(0.3).hex();\nconst primaryBackgroundLight = chroma(primaryBackground).brighten(0.4).hex();\nconst mark = \"#C7802D\";\nconst error = \"#f50\";\nconst white = \"#FFFFFB\";\nconst black = \"#080808\";\nconst getGray = (scale) => chroma.scale([white, black])(scale).hex();\nconst getbalanceColor = (balance) =>\n  chroma.scale([red[2], \"#fff\", green[2]]).domain([-1000, 1000])(balance).hex();\n\nconst colors = {\n  primaryBackground,\n  primaryBackgroundDark,\n  primaryBackgroundLight,\n  mark,\n  error,\n  white,\n  getGray,\n  getbalanceColor\n};\n\nexport default colors;\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, Tooltip } from \"antd\";\nimport colors from \"../../utils/colors\";\n\nconst WizardButton = ({ children, type, show, onClick, label, validator, ...props }) => {\n  const errorMsgs = (validator && validator.call(null)?.errorMsgs) || [];\n  const [tooltipVisible, setTooltipVisible] = useState(false);\n  const disabledNext = typeof validator === \"function\" && errorMsgs.length > 0;\n  return show ? (\n    children ? (\n      React.cloneElement(children, {\n        onClick: !validator || validator.call(null) ? onClick : null,\n        disabled: typeof validator === \"function\" && !validator.call(null),\n      })\n    ) : (\n      <Tooltip\n        title={errorMsgs && <span>{errorMsgs?.[0]}</span>}\n        color={colors.error}\n        visible={tooltipVisible}\n        onVisibleChange={(visible) => setTooltipVisible(visible && disabledNext)}\n      >\n        <Button\n          disabled={disabledNext}\n          type={type}\n          onClick={!validator || validator.call(null) ? onClick : null}\n          {...props}\n        >\n          {label || \"Next\"}\n        </Button>\n      </Tooltip>\n    )\n  ) : null;\n};\n\nWizardButton.defaultProps = {\n  type: \"button\",\n};\n\nWizardButton.propTypes = {\n  show: PropTypes.bool,\n  onClick: PropTypes.func,\n  label: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n  validator: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n};\n\nWizardButton.displayName = \"WizardButton\";\n\nexport default WizardButton;\n","import React, { Children } from \"react\";\n\nimport { RocketOutlined } from \"@ant-design/icons\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\nimport Button from \"./Button\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 24px;\n`;\n\nconst ButtonsList = ({\n  activeStepIndex,\n  totalSteps,\n  onPreviousStep,\n  onNextStep,\n  onSubmit,\n  children,\n  validators,\n  ...formik\n}) => {\n  return (\n    <Wrapper>\n      {Children.map(children, (child) => {\n        const validator = validators[activeStepIndex];\n        if (child.type.displayName === \"PreviousButton\") {\n          return (\n            <Button\n              type=\"link\"\n              show={activeStepIndex > 0}\n              onClick={onPreviousStep}\n              label=\"上一步\"\n              {...child.props}\n            />\n          );\n        }\n        if (child.type.displayName === \"NextButton\") {\n          return (\n            <Button\n              type=\"primary\"\n              show={activeStepIndex < totalSteps}\n              onClick={onNextStep}\n              validator={validator}\n              label=\"下一步\"\n              {...child.props}\n            />\n          );\n        }\n        if (child.type.displayName === \"SubmitButton\") {\n          return (\n            <Button\n              show={activeStepIndex === totalSteps}\n              onClick={formik.submitHandler}\n              validator={validator}\n              type=\"primary\"\n              label={\n                <span>\n                  <RocketOutlined /> 送出\n                </span>\n              }\n              {...child.props}\n            />\n          );\n        }\n        return child;\n      })}\n    </Wrapper>\n  );\n};\n\nButtonsList.propTypes = {\n  activeStepIndex: PropTypes.number,\n  totalSteps: PropTypes.number,\n  onPreviousStep: PropTypes.func,\n  onNextStep: PropTypes.func,\n  onSubmit: PropTypes.func,\n  validators: PropTypes.array,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n};\n\nButtonsList.displayName = \"ButtonsList\";\n\nexport default ButtonsList;\n","const PreviousButton = () => null;\n\nPreviousButton.displayName = \"PreviousButton\";\n\nexport default PreviousButton;\n","const NextButton = () => null;\n\nNextButton.displayName = 'NextButton';\n\nexport default NextButton;","const SubmitButton = () => null;\n\nSubmitButton.displayName = \"SubmitButton\";\n\nexport default SubmitButton;\n","import { Formik } from \"formik\";\nimport Wizard from \"./Wizard\";\nimport StepsList from \"./StepsList\";\nimport Step from \"./Step\";\nimport ButtonsList from \"./ButtonsList\";\nimport PreviousButton from \"./PreviousButton\";\nimport NextButton from \"./NextButton\";\nimport SubmitButton from \"./SubmitButton\";\n\nfunction App({ components, initialValues, validationSchema, onSubmit, ...props }) {\n  return (\n    <Formik initialValues={initialValues}>\n      {(formik) => {\n        const getValidators = (validatorFuncs) =>\n          validatorFuncs.map((func) => () => func({ ...formik }));\n        return (\n          <Wizard onSubmit={onSubmit} initialValues={initialValues} {...formik} {...props}>\n            <StepsList\n              validators={getValidators(components.map(({ validate }) => validate || (() => true)))}\n            >\n              {components.map((c) => (\n                <Step key={c.title} component={c}></Step>\n              ))}\n            </StepsList>\n            <ButtonsList {...formik}>\n              <PreviousButton />\n              <NextButton />\n              <SubmitButton />\n            </ButtonsList>\n          </Wizard>\n        );\n      }}\n      {/* <DisplayFormikState {...props} /> */}\n    </Formik>\n  );\n}\n\n// const WithFormikApp = withFormik(App);\n\nexport default App;\n","import { Transfer } from \"antd\";\nimport { filterParticipants } from \"../../../utils/common\";\nimport { produce } from \"immer\";\n\nconst filterObject = (participants, filterKey) =>\n  filterParticipants(participants, { filter: { [filterKey]: true } }).map(([name]) => name);\n\nconst participantChangeHandler = (draft, options) => {\n  options.forEach(({ keys, action }) => {\n    const keySet = new Set(keys);\n    Object.entries(draft.participants).forEach(([name, obj]) => {\n      const included = keySet.has(name);\n      if (obj[action] !== included) {\n        draft.participants[name][action] = included;\n      }\n    });\n  });\n};\n\nconst SelectParticipants = ({ formik }) => {\n  const { participants } = formik.values;\n\n  const onChange = (nextTargetKeys) => {\n    formik.setValues(\n      produce(formik.values, (draft) => {\n        participantChangeHandler(draft, [\n          { keys: [], action: \"selected\" },\n          { keys: nextTargetKeys, action: \"targeted\" },\n        ]);\n      })\n    );\n  };\n\n  const onSelectChange = (sourceSelectedKeys, targetSelectedKeys) => {\n    const selectedKeys = [...sourceSelectedKeys, ...targetSelectedKeys];\n    formik.setValues(\n      produce(formik.values, (draft) => {\n        participantChangeHandler(draft, [{ keys: selectedKeys, action: \"selected\" }]);\n      })\n    );\n  };\n\n  return (\n    <>\n      <Transfer\n        dataSource={Object.values(participants)}\n        titles={[\"未訂餐\", \"有要訂餐\"]}\n        targetKeys={filterObject(participants, \"targeted\")}\n        selectedKeys={filterObject(participants, \"selected\")}\n        onChange={onChange}\n        onSelectChange={onSelectChange}\n        render={(item) => item.name}\n      ></Transfer>\n    </>\n  );\n};\n\nSelectParticipants.validate = (formik) => {\n  const errors = {};\n  const errorMsgs = [];\n  const { participants } = formik.values;\n  if (filterParticipants(participants).length < 2) {\n    errorMsgs.push(\"至少需選取2個訂餐人\");\n  }\n\n  if (errorMsgs.length > 0) {\n    errors.errorMsgs = errorMsgs;\n  }\n\n  return errors;\n};\n\nSelectParticipants.title = \"請選擇參與訂餐人\";\n\nexport default SelectParticipants;\n","import styled from \"styled-components\";\nimport { Typography } from \"antd\";\n\nconst { Text } = Typography;\n\nconst Wrapper = styled.div`\n  width: ${(props) => props.width}px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n  & > * {\n    display: flex;\n  }\n`;\n\nconst FieldWrapper = ({ text = \"\", width = 275, children }) => (\n  <Wrapper width={width}>\n    {text === \"\" ? <></> : <Text>{text}</Text>}\n    {children}\n  </Wrapper>\n);\n\nexport default FieldWrapper;\n","import styled from \"styled-components\";\n\nimport { FastField } from \"formik\";\nimport colors from \"../../utils/colors\";\n\nconst StyledFastField = styled(FastField)`\n  outline: none;\n  cursor: pointer;\n  width: 155px;\n  height: 36px;\n  border-radius: 2px;\n  border: 1px\n    ${({ errors, touched }) => {\n      return errors && touched ? \"red\" : colors.getGray(0.2);\n    }}\n    solid;\n  padding-left: 4px;\n  font-size: ${(props) => props.fontSize}px;\n  transition: 0.2s ease-in-out;\n  &:hover {\n    border: 1px ${colors.getGray(0.25)} solid;\n    background-color: ${colors.getGray(0.15)};\n  }\n  /* &:focus {\n    background-color: ${colors.white};\n    border: 1px ${colors.primaryBackgroundLight} solid;\n  } */\n  ::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n  ::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n`;\n\nconst Field = ({ type = \"number\", ...props }) => (\n  <StyledFastField type={type} {...props}></StyledFastField>\n);\n\nexport default Field;\n","import { Typography } from \"antd\";\nimport styled from \"styled-components\";\n\nconst StyledText = styled(Typography.Text)`\n  font-size: ${(props) => props?.size}px;\n`;\n\nconst Text = ({ size = 16, children }) => {\n  return <StyledText size={size}>{children}</StyledText>;\n};\n\nexport default Text;\n","import FieldWrapper from \"../_wrapper/FieldWrapper\";\nimport Field from \"./Field\";\nimport Text from \"../../components/Text\";\n\nconst InputItem = ({ text, width, ...props }) => {\n  return (\n    <FieldWrapper text={text} width={width}>\n      <Field {...props}></Field>\n    </FieldWrapper>\n  );\n};\n\nexport default InputItem;\n","import Input from \"../../../components/Input\";\nimport { filterParticipants } from \"../../../utils/common\";\n\nconst RecordCost = ({ formik }) => {\n  const { participants } = formik.values;\n\n  return (\n    <>\n      {filterParticipants(participants).map(([name]) => {\n        return (\n          <Input\n            name={`participants[${name}].cost`}\n            key={name}\n            text={name}\n            value={formik?.values?.participants?.[name]?.cost}\n            onChange={formik.handleChange}\n            onBlur={formik.handleBlur}\n            touched={formik?.touched?.participants?.[name]}\n            errors={formik.errors[name]}\n            placeholder=\"enter somthing\"\n          ></Input>\n        );\n      })}\n    </>\n  );\n};\n\nRecordCost.validate = (formik) => {\n  const errors = {};\n  const errorMsgs = [];\n  const { participants } = formik.values;\n  const existUnfilled =\n    filterParticipants(participants, { filter: { targeted: true, cost: \"\" } }).length > 0;\n\n  if (existUnfilled) {\n    errorMsgs.push(\"需填寫所有訂餐人金額。若沒有訂餐請回上一步移除訂餐人。\");\n  }\n\n  if (errorMsgs.length > 0) {\n    errors.errorMsgs = errorMsgs;\n  }\n  return errors;\n};\n\nRecordCost.title = \"請輸入訂餐金額\";\n\nexport default RecordCost;\n","import { produce } from \"immer\";\nimport { Radio, Space } from \"antd\";\n\nimport { filterParticipants } from \"../../../utils/common\";\n\nconst SelectPayer = ({ formik }) => {\n  const { participants, payer } = formik.values;\n  return (\n    <>\n      <Radio.Group\n        buttonStyle=\"solid\"\n        value={payer}\n        onChange={(e) => {\n          formik.setValues(\n            produce(formik.values, (draft) => {\n              draft.payer = e.target.value;\n            })\n          );\n        }}\n      >\n        <Space direction=\"vertical\">\n          {filterParticipants(participants).map(([name]) => (\n            <Radio.Button key={name} value={name}>\n              {name}\n            </Radio.Button>\n          ))}\n        </Space>\n      </Radio.Group>\n    </>\n  );\n};\n\nSelectPayer.validate = (formik) => {\n  const errors = {};\n  const errorMsgs = [];\n  const { payer, participants } = formik.values;\n\n  if (!payer || !participants[payer].targeted) {\n    errorMsgs.push(\"請選擇付款人\");\n  }\n\n  if (errorMsgs.length > 0) {\n    errors.errorMsgs = errorMsgs;\n  }\n  return errors;\n};\n\nSelectPayer.title = \"請選擇付款人\";\n\nexport default SelectPayer;\n","import { produce } from \"immer\";\n\nimport Input from \"../../../components/Input\";\n\nconst SelectPayer = ({ formik }) => {\n  const { delivery, discount, note } = formik.values;\n  return (\n    <div>\n      <Input\n        text=\"運費\"\n        value={delivery?.fee || \"\"}\n        onChange={(e) => {\n          const { value } = e.target;\n          const fee = value === \"\" ? value : +value;\n          formik.setValues(\n            produce(formik.values, (draft) => {\n              draft.delivery.fee = fee;\n            })\n          );\n        }}\n        placeholder=\"請輸入運費\"\n      ></Input>\n      <Input\n        text=\"優惠\"\n        value={discount?.amount || \"\"}\n        onChange={(e) => {\n          const { value } = e.target;\n          const amount = value === \"\" ? value : +value;\n          formik.setValues(\n            produce(formik.values, (draft) => {\n              draft.discount.amount = amount;\n            })\n          );\n        }}\n        placeholder=\"請輸入優惠\"\n      ></Input>\n      <Input\n        type=\"text\"\n        text=\"備註\"\n        value={note || \"\"}\n        onChange={(e) => {\n          const { value } = e.target;\n          formik.setValues(\n            produce(formik.values, (draft) => {\n              draft.note = value;\n            })\n          );\n        }}\n      ></Input>\n    </div>\n  );\n};\n\nSelectPayer.title = \"其他選項\";\n\nexport default SelectPayer;\n","import { Table, Typography, Tooltip } from \"antd\";\nimport { CrownTwoTone } from \"@ant-design/icons\";\n\nimport { filterParticipants, fixNumber } from \"../../../utils/common\";\nimport colors from \"../../../utils/colors\";\n\nconst arrangeValues = (values) => {\n  const {\n    delivery: { fee: deliveryFee = 0 },\n    discount: { amount: discountAmount = 0 },\n    participants = {},\n    payer = \"\",\n  } = values;\n  const filteredParticipants = filterParticipants(participants);\n  const totalAmount = filteredParticipants.reduce((acc, [_, { cost }]) => acc + cost, 0);\n  const participantCount = filteredParticipants.length;\n  const totalSharedFee = deliveryFee - discountAmount;\n  const sharedFee = fixNumber(totalSharedFee / participantCount);\n  const columns = [\n    {\n      title: \"訂餐人\",\n      dataIndex: \"name\",\n      key: \"name\",\n      render: (text) => (\n        <Tooltip title={payer === text ? \"付款人\" : null}>\n          <Typography.Text strong>\n            {payer === text && <CrownTwoTone twoToneColor={colors.mark} />}\n            {text}\n          </Typography.Text>\n        </Tooltip>\n      ),\n    },\n\n    {\n      title: \"金額\",\n      dataIndex: \"cost\",\n      key: \"cost\",\n      render: (cost) => (\n        <Tooltip title={`${cost} ${sharedFee >= 0 ? \"+\" : \"-\"} ${Math.abs(sharedFee)}`}>\n          <Typography.Link target=\"_blank\">{fixNumber(cost + sharedFee)}</Typography.Link>\n        </Tooltip>\n      ),\n    },\n  ];\n  const dataSource = filteredParticipants.map(([name, { cost }]) => ({\n    key: name,\n    name,\n    cost,\n  }));\n  return {\n    discountAmount,\n    totalAmount,\n    deliveryFee,\n    totalSharedFee,\n    participantCount,\n    sharedFee,\n    dataSource,\n    columns,\n  };\n};\n\nconst ResultsPreview = ({ formik }) => {\n  const { values } = formik;\n  const {\n    discountAmount,\n    deliveryFee,\n    totalAmount,\n    totalSharedFee,\n    participantCount,\n    sharedFee,\n    dataSource,\n    columns,\n  } = arrangeValues(values);\n  const { note } = values;\n  return (\n    <>\n      <Typography.Text strong>{sharedFee < 0 ? \"共享優惠\" : \"共同分擔\"}：</Typography.Text>\n      <Tooltip title={`運費：${deliveryFee}，優惠：${discountAmount}`}>\n        <Typography.Link target=\"_blank\">{Math.abs(totalSharedFee)}</Typography.Link>\n      </Tooltip>{\" \"}\n      ÷ {participantCount} = {Math.abs(sharedFee)}\n      <br></br>\n      <Typography.Text strong>備註：</Typography.Text>\n      {note ? note : <Typography.Text type=\"secondary\">無備註</Typography.Text>}\n      <Table\n        scroll={{ y: 300 }}\n        size=\"small\"\n        pagination={false}\n        columns={columns}\n        dataSource={dataSource}\n        summary={() => (\n          <Table.Summary fixed>\n            <Table.Summary.Row>\n              <Table.Summary.Cell index={0}>總額</Table.Summary.Cell>\n              <Table.Summary.Cell index={1}>{totalAmount + totalSharedFee}</Table.Summary.Cell>\n            </Table.Summary.Row>\n          </Table.Summary>\n        )}\n      ></Table>\n    </>\n  );\n};\n\nResultsPreview.title = \"結果預覽\";\n\nexport default ResultsPreview;\n","import Modal from \"../../../components/Modal\";\n\nimport FormikWizard from \"../../../components/FormikWizard\";\n\nimport SelectParticipants from \"./SelectParticipants\";\nimport RecordCost from \"./RecordCost\";\nimport SelectPayer from \"./SelectPayer\";\nimport RecordOtherStuff from \"./RecordOtherStuff\";\nimport ResultsPreview from \"./ResultsPreview\";\n\nconst components = [SelectParticipants, RecordCost, SelectPayer, RecordOtherStuff, ResultsPreview];\n\nconst CURDRecordModal = ({ initialValues, button, buttonTitle = \"新增一筆記錄\", onSubmit }) => {\n  return (\n    <Modal button={button} buttonTitle={buttonTitle}>\n      <FormikWizard\n        initialValues={initialValues}\n        components={components}\n        onSubmit={onSubmit}\n      ></FormikWizard>\n    </Modal>\n  );\n};\n\nexport default CURDRecordModal;\n","import React, { useState, Children, cloneElement, useEffect } from \"react\";\nimport { Popconfirm } from \"antd\";\n\nconst _Popconfirm = ({ children, popconfirmTitle = \"title\", onConfirm, ...props }) => {\n  const [visible, setVisible] = useState(false);\n  const [confirmLoading, setConfirmLoading] = useState(false);\n\n  useEffect(\n    () => () => {\n      setVisible(null);\n      setConfirmLoading(null);\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n\n  const showPopconfirm = () => {\n    setVisible(true);\n  };\n\n  const handleOk = async () => {\n    setConfirmLoading(true);\n    await onConfirm();\n    setVisible(false);\n    setConfirmLoading(false);\n  };\n\n  const handleCancel = () => {\n    setVisible(false);\n  };\n\n  return (\n    <>\n      <Popconfirm\n        title={popconfirmTitle}\n        visible={visible}\n        onConfirm={handleOk}\n        okButtonProps={{ loading: confirmLoading }}\n        onCancel={handleCancel}\n        onVisibleChange={(visible) => {\n          if (!visible) {\n            setVisible(false);\n          }\n        }}\n      >\n        {Children.map(children, (child) =>\n          cloneElement(child, {\n            onClick: showPopconfirm,\n            ...props,\n          })\n        )}\n      </Popconfirm>\n    </>\n  );\n};\n\nexport default _Popconfirm;\n","import styled from \"styled-components\";\n\nconst StyledButton = styled.button`\n  outline: none;\n  border: none;\n  background-color: transparent;\n  box-shadow: rgba(99, 99, 99, 0.2) 0px 0px 8px 0px;\n  cursor: pointer;\n  margin: 20px;\n  border-radius: 4px;\n  transition: 1.9s cubic-bezier(0.075, 0.82, 0.165, 1);\n  margin: 4px;\n  &:hover {\n    box-shadow: rgba(20, 20, 20, 0.4) 0px 0px 13px 2px;\n  }\n  &:active {\n    box-shadow: rgba(99, 99, 99, 0.2) 0px 0px 4px 0px;\n    background-color: rgba(99, 99, 99, 0.2);\n  }\n`;\n\nconst IconButton = ({ children, ...props }) => {\n  return <StyledButton {...props}>{children}</StyledButton>;\n};\n\nexport default IconButton;\n","import moment from \"moment\";\nimport styled from \"styled-components\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Table, Tooltip, Typography, Spin } from \"antd\";\nimport { DeleteTwoTone, EditTwoTone } from \"@ant-design/icons\";\n\nimport { removeRecord, updateRecord } from \"../../redux/record/action\";\nimport { fixNumber, filterParticipants } from \"../../utils/common\";\n\nimport AddNewRecordModal from \"../_common/CURDRecordModal\";\n\nimport Popconfirm from \"../../components/Popconfirm\";\nimport IconButton from \"../../components/IconButton\";\nimport { volcano, green } from \"@ant-design/colors\";\nimport colors from \"../../utils/colors\";\n\nconst BalanceSpan = styled.span`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  padding-left: 16px;\n`;\n\nconst { Text, Link } = Typography;\n\nconst generateColumns = (events) => {\n  const totalCostAmount = generateTotalCostAmount(events);\n  const participants = Object.keys(totalCostAmount).map((participant) => {\n    const balance = fixNumber(totalCostAmount[participant]);\n    return {\n      title: participant,\n      render: (cost) => cost || 0,\n      children: [\n        {\n          title: (\n            <BalanceSpan style={{ background: colors.getbalanceColor(balance) }}>\n              {balance}\n            </BalanceSpan>\n          ),\n          dataIndex: participant,\n          key: participant,\n        },\n      ],\n      balance,\n    };\n  });\n  participants.sort((a, b) => a.balance - b.balance);\n  return [\n    {\n      title: \"日期\",\n      dataIndex: \"date\",\n      key: \"date\",\n      width: 80,\n      fixed: \"left\",\n    },\n    { title: \"付款人\", dataIndex: \"payer\", key: \"payer\", width: 100, fixed: \"left\" },\n    { title: \"共享\", dataIndex: \"sharingFee\", key: \"sharingFee\", width: 80, fixed: \"left\" },\n    ...participants,\n    { title: \"總額\", dataIndex: \"totalAmount\", key: \"totalAmount\", fixed: \"right\", width: 75 },\n    {\n      title: \"備註\",\n      dataIndex: \"note\",\n      key: \"note\",\n      ellipsis: {\n        showTitle: false,\n      },\n      render: (note) => <Tooltip title={note}>{note}</Tooltip>,\n      width: 175,\n      fixed: \"right\",\n    },\n    { title: \"Action\", dataIndex: \"action\", key: \"action\", width: 100, fixed: \"right\" },\n  ];\n};\n\nconst genDefaultRecord = (record, index, dispatch) => {\n  const { date, participants, payer, delivery, discount, note, id } = record;\n  const deliveryFee = delivery?.fee || 0;\n  const discountAmount = discount?.amount || 0;\n  const sharingFee = discountAmount - deliveryFee;\n  const arrangedParticipants = Object.entries(participants)\n    .map(([name, { cost, targeted }]) => ({\n      name,\n      cost: targeted ? cost : <Text type=\"secondary\">無參加</Text>,\n    }))\n    .reduce(\n      (acc, { name, cost }) => ({\n        ...acc,\n        ...{ [name]: cost },\n      }),\n      {}\n    );\n  return {\n    key: `${index + 1}`,\n    date: moment(date).format(\"M / D\"),\n    sharingFee: (\n      <Tooltip\n        title={\n          <div>\n            <p style={{ color: volcano[1], margin: 0 }}>運費：{deliveryFee}</p>\n            <p style={{ color: green[1], margin: 0 }}>優惠：{discountAmount}</p>\n          </div>\n        }\n      >\n        <Link>{sharingFee}</Link>\n      </Tooltip>\n    ),\n    payer,\n    discountAmount,\n    ...arrangedParticipants,\n    deliveryFee,\n    totalAmount: filterParticipants(participants).reduce(\n      (acc, [_, { cost = 0 }]) => acc + cost,\n      deliveryFee - discountAmount\n    ),\n    note,\n    action: (\n      <div>\n        <AddNewRecordModal\n          initialValues={record}\n          button={\n            <Tooltip title=\"編輯此筆記錄\" placement=\"bottomLeft\">\n              <IconButton>\n                <EditTwoTone twoToneColor={green[5]} />\n              </IconButton>\n            </Tooltip>\n          }\n          onSubmit={(record) => {\n            dispatch(updateRecord({ recordId: record.id, updatedRecord: record }));\n          }}\n        >\n          Update\n        </AddNewRecordModal>\n        <Popconfirm\n          popconfirmTitle=\"即將刪除此筆記錄\"\n          onConfirm={() => dispatch(removeRecord({ removingId: id }))}\n        >\n          <Tooltip title=\"刪除此筆記錄\" placement=\"bottomLeft\">\n            <IconButton>\n              <DeleteTwoTone twoToneColor={volcano[5]} />\n            </IconButton>\n          </Tooltip>\n        </Popconfirm>\n      </div>\n    ),\n  };\n};\n\n// TODO 把兩種顯示模式拆成兩個檔案，需詳細規畫\nconst generateDataSource = (records, dispatch) => {\n  return records.map((record, i) => {\n    const { type } = record;\n    switch (type) {\n      case \"\":\n        return {};\n      default:\n        return genDefaultRecord(record, i, dispatch);\n    }\n  });\n};\n\nconst generateTotalCostAmount = (events) =>\n  events.reduce((acc, { participants, payer, delivery, discount }) => {\n    if (Object.keys(participants).length === 0) {\n      return acc;\n    }\n    const deliveryFee = delivery?.fee || 0;\n    const discountAmount = discount?.amount || 0;\n    const initValue = deliveryFee - discountAmount;\n    const participantEntries = filterParticipants(participants);\n    const averageDeliveryFee = initValue / participantEntries.length;\n    let totalAmount = initValue;\n    participantEntries.forEach(([name, { cost = 0 }]) => {\n      acc[name] = (acc[name] || 0) - cost - averageDeliveryFee;\n      totalAmount += cost;\n    });\n    acc[payer] += totalAmount;\n    return acc;\n  }, {});\n\nconst DataTable = () => {\n  const dispatch = useDispatch();\n  const { data: records, loading } = useSelector((state) => state.records);\n  const columns = generateColumns(records);\n  const dataSource = generateDataSource(records, dispatch);\n  return (\n    <Spin spinning={loading}>\n      <Table\n        dataSource={dataSource}\n        columns={columns}\n        scroll={{ x: 1000 }}\n        pagination={{ pageSize: 4 }}\n      ></Table>\n    </Spin>\n  );\n};\nexport default DataTable;\n","import styled from \"styled-components\";\nimport { Button as _Button } from \"antd\";\n\nconst StyledButton = styled(_Button)`\n`;\n\nconst Button = (props) => {\n  return <StyledButton {...props}>{props.children}</StyledButton>;\n};\n\nexport default Button;\n","import * as yup from \"yup\";\nimport styled from \"styled-components\";\nimport { Select } from \"antd\";\nimport { Formik, Form, ErrorMessage } from \"formik\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { addUser } from \"../../redux/user/action\";\nimport Modal from \"../../components/Modal\";\nimport Input from \"../../components/Input\";\nimport Button from \"../../components/Button\";\n\nconst { Option } = Select;\n\nconst Wrapper = styled.div`\n  margin-top: 24px;\n`;\n\nconst AddUserModal = () => {\n  const userData = useSelector((state) => state?.users || {});\n  const { data: users } = userData;\n  const dispatch = useDispatch();\n  return (\n    <Modal buttonTitle=\"新增使用者\" title=\"新增使用者\">\n      <Formik\n        initialValues={{ userName: \"\" }}\n        validationSchema={() =>\n          yup.object().shape({\n            userName: yup.string().required(\"必須填寫使用者名稱\"),\n          })\n        }\n      >\n        {(formik) => {\n          const {\n            values: { userName },\n          } = formik;\n          return (\n            <Form>\n              <Wrapper>\n                <Input\n                  type=\"text\"\n                  text=\"使用者名稱\"\n                  name=\"userName\"\n                  onChange={formik.handleChange}\n                  onBlur={formik.handleBlur}\n                ></Input>\n                <ErrorMessage name=\"userName\"></ErrorMessage>\n              </Wrapper>\n              <Wrapper>\n                <Select style={{ width: 150 }}>\n                  {Object.entries(users).map(([name]) => (\n                    <Option key={name}>{name}</Option>\n                  ))}\n                </Select>\n              </Wrapper>\n              <Wrapper>\n                <Button\n                  type=\"primary\"\n                  onClick={() => {\n                    dispatch(addUser({ userName }));\n                  }}\n                >\n                  新增使用者\n                </Button>\n              </Wrapper>\n            </Form>\n          );\n        }}\n      </Formik>\n    </Modal>\n  );\n};\n\nexport default AddUserModal;\n","import CURDRecordModal from \"../_common/CURDRecordModal\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { addNewRecord } from \"../../redux/record/action\";\nimport { genNewRecordObject } from \"../../utils/common\";\n\nconst AddNewRecordModal = () => {\n  const users = useSelector((state) => state?.users?.data || {});\n  \n  const initNewRecord = genNewRecordObject(users);\n  const dispatch = useDispatch();\n\n  return (\n    <CURDRecordModal\n      initialValues={initNewRecord}\n      buttonTitle=\"新增一筆資料\"\n      onSubmit={(record) => {\n        dispatch(addNewRecord(record));\n      }}\n    ></CURDRecordModal>\n  );\n};\n\nexport default AddNewRecordModal;\n","import { Field, FastField } from \"formik\";\nimport FieldWrapper from \"../_wrapper/FieldWrapper\";\n\nexport const FormikField = ({ text, fast, children, ...restProps }) => (\n  <FieldWrapper text={text}>\n    {fast ? (\n      <FastField {...restProps}>{children}</FastField>\n    ) : (\n      <Field {...restProps}>{children}</Field>\n    )}\n  </FieldWrapper>\n);\nexport default FormikField;\n","import { Select } from \"antd\";\nimport Field from \"../FormikField\";\n\nexport const FormikSelect = ({\n  text,\n  name,\n  validate,\n  fast,\n  children,\n  onChange,\n  onBlur,\n  ...restProps\n}) => {\n  return (\n    <Field text={text} name={name} validate={validate} fast={fast}>\n      {({ field: { value }, form: { setFieldValue, setFieldTouched } }) => (\n        <Select\n          onChange={(value, option) => {\n            setFieldValue(name, value);\n            onChange && onChange(value, option);\n          }}\n          onBlur={(value) => {\n            setFieldTouched(name);\n            onBlur && onBlur(value);\n          }}\n          value={value === \"\" || value === null ? undefined : value}\n          {...restProps}\n        >\n          {children}\n        </Select>\n      )}\n    </Field>\n  );\n};\n\nFormikSelect.Option = Select.Option;\n\nexport default FormikSelect;\n","// import { produce } from \"immer\";\n// import { Radio, Space, Steps } from \"antd\";\nimport FormikSelect from \"../../../components/FormikSelect\";\nimport Input from \"../../../components/Input\";\n\nimport React from \"react\";\n\nconst { Option } = FormikSelect;\nconst SelectPayer = ({ formik }) => {\n  const { participants, payer, payee, transferAmount } = formik.values;\n  // const  onChange= (value)=> {\n  //   console.log(`selected ${value}`);\n  // }\n\n  // function onBlur() {\n  //   console.log(\"blur\");\n  // }\n\n  // function onFocus() {\n  //   console.log(\"focus\");\n  // }\n\n  // function onSearch(val) {\n  //   console.log(\"search:\", val);\n  // }\n  return (\n    <>\n      <FormikSelect\n        name=\"payer\"\n        text=\"付款人\" \n        showSearch\n        style={{ width: 155 }}\n        placeholder=\"Select a person\"\n        optionFilterProp=\"children\"\n        filterOption={(input, option) =>\n          option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n        }\n      >\n        {Object.keys(participants).map((participant) => (\n          <Option key={participant} value={participant} disabled={payee === participant}>\n            {participant}\n          </Option>\n        ))}\n      </FormikSelect>\n      <FormikSelect\n        name=\"payee\"\n        text=\"收款人\"\n        showSearch\n        style={{ width: 155 }}\n        placeholder=\"Select a person\"\n        optionFilterProp=\"children\"\n        filterOption={(input, option) =>\n          option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0\n        }\n      >\n        {Object.keys(participants).map((participant) => (\n          <Option key={participant} value={participant} disabled={payer === participant}>\n            {participant}\n          </Option>\n        ))}\n      </FormikSelect>\n      <Input\n        text=\"金額\"\n        value={transferAmount}\n        name=\"transferAmount\"\n        placeholder=\"請輸入金額\"\n      ></Input>\n      {/* <Radio.Group\n        buttonStyle=\"solid\"\n        value={payer}\n        onChange={(e) => {\n          formik.setValues(\n            produce(formik.values, (draft) => {\n              draft.payer = e.target.value;\n            })\n          );\n        }}\n      >\n        <Space direction=\"vertical\">\n          {Object.entries(participants).map(([name]) => (\n            <Radio.Button key={name} value={name}>\n              {name}\n            </Radio.Button>\n          ))}\n        </Space>\n      </Radio.Group> */}\n    </>\n  );\n};\n\nSelectPayer.validate = (formik) => {\n  const errors = {};\n  const errorMsgs = [];\n  const { transferAmount, payer, payee } = formik.values;\n  if (!transferAmount) {\n    errorMsgs.push(\"請輸入金額\");\n  }\n  if (!payer) {\n    errorMsgs.push(\"請選擇付款人\");\n  }\n  if (!payee) {\n    errorMsgs.push(\"請選擇收款人\");\n  }\n  if (errorMsgs.length > 0) {\n    errors.errorMsgs = errorMsgs;\n  }\n\n  return errors;\n};\n\nSelectPayer.title = \"請填寫轉錢資訊\";\n\nexport default SelectPayer;\n","import Modal from \"../../../components/Modal\";\n\nimport FormikWizard from \"../../../components/FormikWizard\";\n\nimport RecordInfo from \"./RecordInfo\";\n\nconst components = [RecordInfo];\n\nconst addNecessaryAttributions = (initialValues) => ({\n  participants: initialValues.participants,\n  payer: \"\",\n  payee: \"\",\n  transferAmount: \"\",\n});\n\nconst TransferMoneyModal = ({ loading, initialValues, button, buttonTitle = \"轉錢\", onSubmit }) => {\n  const values = addNecessaryAttributions(initialValues);\n  \n  return (\n    <Modal loading={loading} button={button} buttonTitle={buttonTitle}>\n      <FormikWizard\n        initialValues={values}\n        components={components}\n        onSubmit={onSubmit}\n      ></FormikWizard>\n    </Modal>\n  );\n};\n\nexport default TransferMoneyModal;\n","import { produce } from \"immer\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport TransferMoneyModal from \"../_common/TransferMoneyModal\";\nimport { addNewRecord } from \"../../redux/record/action\";\nimport { genNewRecordObject } from \"../../utils/common\";\n\nconst TransferMoney = () => {\n  const userObject = useSelector((state) => state?.users || {});\n\n  const { data: users = {}, loading } = userObject;\n  const initNewTransferRecord = { ...genNewRecordObject(users), type: \"TRANSFER_MONEY\" };\n  const dispatch = useDispatch();\n\n  return (\n    <TransferMoneyModal\n      initialValues={initNewTransferRecord}\n      buttonTitle=\"轉錢\"\n      loading={loading}\n      onSubmit={(record) => {\n        const { payer, payee, transferAmount } = record;\n        const resultRecord = produce(initNewTransferRecord, (draft) => {\n          Object.entries(draft.participants).forEach(([name, obj]) => {\n            if (name !== payee && name !== payer) {\n              obj.targeted = false;\n            }\n          });\n          draft.participants[payee].cost = transferAmount;\n          draft.participants[payer].cost = 0;\n          draft.payer = payer;\n        });\n        console.log(resultRecord);\n        dispatch(addNewRecord(resultRecord));\n      }}\n    ></TransferMoneyModal>\n  );\n};\n\nexport default TransferMoney;\n","import AddUserModal from \"./AddUserModal\";\nimport AddNewRecordModal from \"./AddNewRecordModal\";\nimport TransferMoney from './TransferMoney'\n\nconst Panel = () => {\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        height: \"100%\",\n        alignItems: \"center\",\n        justifyContent: \"flex-end\",\n      }}\n    >\n      <TransferMoney></TransferMoney>\n      <AddUserModal></AddUserModal>\n      <AddNewRecordModal></AddNewRecordModal>\n    </div>\n  );\n};\nexport default Panel;\n","import { Layout } from \"antd\";\nimport { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { loadAllRecords } from \"./redux/record/action\";\nimport { loadAllUsers } from \"./redux/user/action\";\nimport DataTable from \"./containers/DataTable\";\nimport Panel from \"./containers/Panel\";\n\nconst { Header, Content, Footer, Sider } = Layout;\nconst App = () => {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(loadAllRecords());\n    dispatch(loadAllUsers());\n  }, [dispatch]);\n\n  return (\n    <>\n      <Layout className=\"site-layout\">\n        <Header className=\"site-layout-background\" style={{ padding: 0 }}>\n          <Panel></Panel>\n        </Header>\n        <Layout>\n          {/* <Sider>32</Sider> */}\n          <Content style={{ margin: 16, borderRadius: 4 }}>\n            <DataTable></DataTable>\n          </Content>\n        </Layout>\n        <Footer style={{ textAlign: \"center\" }}>Ant Design ©2018 Created by Ant UED</Footer>\n      </Layout>\n    </>\n  );\n};\nexport default App;\n","const reducerHandler = (state, action, data) => {\n  switch (action.httpState) {\n    case \"REQUEST\":\n      return {\n        ...state,\n        loading: true,\n      };\n    case \"SUCCESS\":\n      return {\n        ...state,\n        data: data ? data : action.data,\n        loading: false,\n        error: null,\n      };\n    case \"FAILURE\":\n      return {\n        ...state,\n        loading: false,\n        error: data ? data : action.data,\n        data: null,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default reducerHandler;\n","import reducerHandler from \"../utils/reducerHandler\";\n\nimport {\n  loadAllRecordsActions,\n  addNewRecordActions,\n  updateRecordActions,\n  removeRecordActions,\n} from \"./action\";\nconst initialState = { data: [] };\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case loadAllRecordsActions.REQUEST:\n    case loadAllRecordsActions.SUCCESS:\n    case loadAllRecordsActions.FAILURE:\n    case addNewRecordActions.REQUEST:\n    case addNewRecordActions.SUCCESS:\n    case addNewRecordActions.FAILURE:\n    case updateRecordActions.REQUEST:\n    case updateRecordActions.SUCCESS:\n    case updateRecordActions.FAILURE:\n    case removeRecordActions.REQUEST:\n    case removeRecordActions.SUCCESS:\n    case removeRecordActions.FAILURE:\n      return reducerHandler(state, action);\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","\n\nimport { loadAllUsersActions, addUserActions } from \"./action\";\nimport reducerHandler from \"../utils/reducerHandler\";\n\nconst initialState = {};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case loadAllUsersActions.REQUEST:\n    case loadAllUsersActions.SUCCESS:\n    case loadAllUsersActions.FAILURE:\n    case addUserActions.REQUEST:\n    case addUserActions.SUCCESS:\n    case addUserActions.FAILURE:\n      return reducerHandler(state, action);\n\n    // return reducerHandler(\n    //   state,\n    //   action,\n    //   produce(state.data, (draft) => {\n    //     draft[action.data.name] = action.data;\n    //   }),\n    //   action\n    // );\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","export const snapshots2Docs = (snapshots) => (snapshots?.docs ? snapshots.docs : snapshots);\nexport const snapshot2Data = (snapshot) => {\n  if (snapshot?.data && typeof snapshot.data === \"function\") {\n    return snapshot.data();\n  }\n  return snapshot;\n};\n\nexport const getIdFromAddedObject = (addedObject) => {\n  if (typeof addedObject === \"string\") {\n    return addedObject;\n  }\n  return addedObject?.data?.key;\n};\n","import moment from \"moment\";\nimport { produce } from \"immer\";\nimport { nanoid } from \"nanoid\";\nimport { all, takeLatest, put, select } from \"redux-saga/effects\";\nimport { snapshots2Docs, snapshot2Data } from \"../../utils/dbApiUnification\";\nimport { getUserDB } from \"../../firebase\";\nimport { loadAllUsersActions, addUserActions } from \"./action\";\n\nfunction* loadAllUsers() {\n  try {\n    const snapshots = yield getUserDB().get();\n    const docs = snapshots2Docs(snapshots);\n    const userObject = docs\n      .map(snapshot2Data)\n      .reduce((acc, cur) => ({ ...acc, [cur.name]: {} }), {});\n    yield put(loadAllUsersActions.success(userObject));\n  } catch (err) {\n    yield put(loadAllUsersActions.failure(err));\n  }\n}\n\nfunction* addUser({ data }) {\n  const { userName } = data;\n  if (userName) {\n    const users = yield select((state) => state?.users?.data);\n    try {\n      const id = nanoid();\n      const userObject = {\n        name: userName,\n        date: new moment().valueOf(),\n        id,\n      };\n      yield getUserDB().doc(id).set(userObject);\n      yield put(\n        addUserActions.success(\n          produce(users, (draft) => {\n            draft[userName] = userObject;\n          })\n        )\n      );\n    } catch (err) {\n      yield put(addUserActions.failure(err));\n    }\n  }\n}\n\nexport default function* recordSaga() {\n  yield all([\n    takeLatest(loadAllUsersActions.REQUEST, loadAllUsers),\n    takeLatest(addUserActions.REQUEST, addUser),\n  ]);\n}\n","import moment from \"moment\";\nimport { nanoid } from \"nanoid\";\nimport { all, takeLatest, put, select } from \"redux-saga/effects\";\nimport { snapshots2Docs, snapshot2Data } from \"../../utils/dbApiUnification\";\n\nimport {\n  loadAllRecordsActions,\n  addNewRecordActions,\n  updateRecordActions,\n  removeRecordActions,\n} from \"./action\";\nimport { getRecordDB } from \"../../firebase\";\n\nfunction* loadAllRecords() {\n  try {\n    const snapshots = yield getRecordDB().orderBy(\"date\", \"desc\").get();\n    const docs = snapshots2Docs(snapshots);\n    const allRecords = docs.map((snapshot) => ({\n      ...snapshot2Data(snapshot),\n      id: snapshot.id,\n    }));\n    yield put(loadAllRecordsActions.success(allRecords));\n  } catch (err) {\n    yield put(loadAllRecordsActions.failure(err));\n  }\n}\n\nfunction* addNewRecord({ data: newRecord }) {\n  if (!newRecord) {\n    return;\n  }\n  const id = nanoid();\n  const arrangedRecord = { ...newRecord, date: new moment().valueOf(), id };\n\n  try {\n    yield getRecordDB().doc(id).set(arrangedRecord);\n    const allRecords = yield select((state) => state?.records?.data || []);\n\n    yield put(addNewRecordActions.success([arrangedRecord, ...allRecords]));\n  } catch (err) {\n    yield put(addNewRecordActions.failure(err));\n  }\n}\n\nfunction* updateRecord({ data }) {\n  const { recordId, updatedRecord } = data;\n  const allRecords = yield select((state) => state?.records?.data || []);\n  try {\n    yield getRecordDB().doc(recordId).set(updatedRecord);\n    yield put(\n      updateRecordActions.success(\n        allRecords.map((record) => (record.id === recordId ? updatedRecord : record))\n      )\n    );\n  } catch (e) {}\n}\n\nfunction* removeRecord({ data }) {\n  const { removingId } = data;\n  const allRecords = yield select((state) => state?.records?.data || []);\n  try {\n    yield getRecordDB().doc(removingId).delete();\n    yield put(removeRecordActions.success(allRecords.filter(({ id }) => id !== removingId)));\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nexport default function* recordSaga() {\n  yield all([\n    takeLatest(loadAllRecordsActions.REQUEST, loadAllRecords),\n    takeLatest(addNewRecordActions.REQUEST, addNewRecord),\n    takeLatest(updateRecordActions.REQUEST, updateRecord),\n    takeLatest(removeRecordActions.REQUEST, removeRecord),\n  ]);\n}\n","import { all } from \"redux-saga/effects\";\n\nimport userSaga from \"./user/saga\";\nimport recordSaga from \"./record/saga\";\n\nexport default function* rootSaga() {\n  yield all([userSaga(), recordSaga()]);\n}\n","import { createStore, applyMiddleware } from \"redux\";\nimport records from \"./record/reducer\";\nimport users from \"./user/reducer\";\n\nimport createSagaMiddleware from \"redux-saga\";\nimport { combineReducers } from \"redux\";\nimport { createLogger } from \"redux-logger\";\nimport rootSaga from \"./rootSaga\";\n\nconst loggerMiddleware = createLogger();\n\nconst sagaMiddleare = createSagaMiddleware();\n\nconst store = createStore(\n  combineReducers({\n    records,\n    users,\n  }),\n  applyMiddleware(sagaMiddleare, loggerMiddleware)\n);\nsagaMiddleare.run(rootSaga);\n\nexport default store;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport \"antd/dist/antd.css\";\nimport App from \"./App\";\n// import reportWebVitals from \"./reportWebVitals\";\nimport store from \"./redux/store\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}