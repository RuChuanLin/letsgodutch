(this.webpackJsonpbookkeeping=this.webpackJsonpbookkeeping||[]).push([[0],{248:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(31),r=n.n(c),o=n(50),i=(n(169),n(52)),l=n(74),u=n(55),s=n(75),d=n(250),j=n(41),b=n.n(j),O=n(19),f=function(e){return e.reduce((function(e,t){var n=t.participants,a=t.payer,c=t.delivery.fee,r=c/Object.keys(n).length,o=c;return console.log(n),Object.entries(n).forEach((function(t){var n=Object(l.a)(t,2),a=n[0],c=n[1];e[a]=e[a]||0,e[a]-=c+r,o+=c})),e[a]+=o,e}),{})},p=function(){var e=Object(o.c)((function(e){return e.records})),t=function(e){var t=f(e);console.log(t);var n=Object.keys(t);return[{title:"\u65e5\u671f",dataIndex:"date",key:"date"},{title:"\u4ed8\u6b3e\u4eba",dataIndex:"payer",key:"payer"},{title:"\u904b\u8cbb",dataIndex:"deliveryFee",key:"deliveryFee"}].concat(Object(s.a)(n.map((function(e){var n=e.toLocaleLowerCase();return{title:e,render:function(e){return e||0},children:[{title:t[e],dataIndex:n,key:n}]}}))),[{title:"\u7e3d\u984d",dataIndex:"totalAmount",key:"totalAmount"}])}(e),n=e.map((function(e,t){var n=e.date,a=e.participants,c=e.payer,r=e.delivery.fee;return Object(u.a)(Object(u.a)({key:"".concat(t+1),date:b()(n).format("M / D"),payer:c},Object.entries(a).reduce((function(e,t){var n=Object(l.a)(t,2),a=n[0],c=n[1];return Object(u.a)(Object(u.a)({},e),Object(i.a)({},a.toLocaleLowerCase(),c))}),{})),{},{deliveryFee:r,totalAmount:Object.entries(a).reduce((function(e,t){var n=Object(l.a)(t,2);return n[0],e+n[1]}),r)})}));return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(d.a,{dataSource:n,columns:t,scroll:{y:240}})})},v=n(97),y=n(252),h=n(253),g="USER__LOAD_ALL_USERS",m="USER__ADD_USER",x=n(135);n(247);x.a.initializeApp({apiKey:"AIzaSyC_syLiDTXmWb565I3eu65otaLVggyvHts",authDomain:"bookkeeping-7d6e7.firebaseapp.com",projectId:"bookkeeping-7d6e7"});var k=x.a.firestore(),C=function(){return k.collection("records")},R=function(){return k.collection("users")},F=n(37),_=n(254),D=function(e){var t=e.buttonTitle,n=void 0===t?"Open Modal":t,c=e.title,r=e.okFunction,o=e.children,i=Object(a.useState)(!1),u=Object(l.a)(i,2),s=u[0],d=u[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(F.a,{type:"primary",onClick:function(){d(!0)},children:n}),Object(O.jsx)(_.a,{title:c,visible:s,onOk:function(){r(),d(!1)},onCancel:function(){d(!1)},children:o})]})},I=v.a.Option,L=function(){var e=Object(o.c)((function(e){return e.users})),t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],r=n[1],i=Object(o.b)();return Object(O.jsx)(D,{buttonTitle:"\u65b0\u589e\u4f7f\u7528\u8005",title:"\u65b0\u589e\u4f7f\u7528\u8005",okFunction:function(){i(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userName;return function(t,n){if(e){var a={name:e};R().add(a).then((function(){t({type:m,payload:a})}))}}}({userName:c})),r("")},children:Object(O.jsxs)(y.a,{children:[Object(O.jsx)(y.a.Item,{label:"\u4f7f\u7528\u8005\u540d\u7a31",rules:[{message:"\u8f38\u5165\u4f7f\u7528\u8005\u540d\u7a31",required:!0}],children:Object(O.jsx)(h.a,{type:"text",value:c,onChange:function(e){return r(e.target.value)}})}),Object(O.jsx)(v.a,{style:{width:150},children:e.map((function(e){var t=e.name;return Object(O.jsx)(I,{children:t},t)}))})]})})},S=n(251),E="FOCUS_RECORD__UPDATE_RECORD",A=function(e){return{type:E,payload:e}},w="RECORDS__ADD_RECORD",T="RECORDS__LOAD_ALL_RECORD",P=v.a.Option,U=function(e){console.log("Success:",e)},J=function(e){console.log("Failed:",e)},B=function(){var e,t,n=Object(o.c)((function(e){return e.focusRecord})),a=Object(o.b)();return Object(O.jsx)(D,{buttonTitle:"\u65b0\u589e\u4e00\u7b46\u8cc7\u6599",title:"\u65b0\u589e\u4e00\u7b46\u8cc7\u6599",okFunction:function(){C().add(n).then((function(){return a({type:w,payload:n})}))},children:Object(O.jsxs)(y.a,(t={name:"basic"},Object(i.a)(t,"name","basic"),Object(i.a)(t,"labelCol",{span:8}),Object(i.a)(t,"wrapperCol",{span:16}),Object(i.a)(t,"onFinish",U),Object(i.a)(t,"onFinishFailed",J),Object(i.a)(t,"children",[Object(O.jsx)(y.a.Item,{label:"DatePicker",children:Object(O.jsx)(S.a,{value:b()(null===n||void 0===n?void 0:n.date),onChange:function(e){return a(A({date:e?e.valueOf():b()().valueOf()}))}})}),Object(O.jsx)(y.a.Item,{name:"select",label:"Select",hasFeedback:!0,rules:[{required:!0,message:"Please select your country!"}],children:Object(O.jsx)(v.a,{allowClear:!0,style:{width:"100%"},placeholder:"Please select",onChange:function(e){a(A({payer:e}))},value:null===n||void 0===n?void 0:n.payer,children:["River","Jill","Tony","Gary"].map((function(e){return Object(O.jsx)(P,{children:e},e)}))})}),["River","Jill","Tony","Gary"].map((function(e){var t;return Object(O.jsx)(y.a.Item,{label:e,rules:[{message:"\u8f38\u5165\u9ede\u9910\u91d1\u984d\uff01"}],children:Object(O.jsx)(h.a,{type:"number",value:(null===n||void 0===n||null===(t=n.participants)||void 0===t?void 0:t[e])||0,onChange:function(t){a(A({participants:Object(u.a)(Object(u.a)({},n.participants),{},Object(i.a)({},e,+t.target.value))}))},placeholder:"\u9ede\u9910\u91d1\u984d\uff0c\u4e0d\u8f38\u5165\u4ee3\u8868\u6c92\u9ede\u9910"})},e)})),Object(O.jsx)(y.a.Item,{label:"\u904b\u8cbb",rules:[{message:"\u8f38\u5165\u904b\u8cbb"}],children:Object(O.jsx)(h.a,{type:"number",value:(null===n||void 0===n||null===(e=n.delivery)||void 0===e?void 0:e.fee)||0,onChange:function(e){a(A({delivery:{fee:+e.target.value}}))},placeholder:"\u9ede\u9910\u91d1\u984d\uff0c\u4e0d\u8f38\u5165\u4ee3\u8868\u6c92\u9ede\u9910"})})]),t))})},q=function(){return Object(O.jsxs)("div",{children:[Object(O.jsx)(L,{}),Object(O.jsx)(B,{})]})},z=function(){var e=Object(o.b)();return Object(a.useEffect)((function(){e(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).force;return function(t,n){var a=n().records;0===a.length||e?C().orderBy("date","desc").get().then((function(e){var n=e.docs.map((function(e){return e.data()}));console.log(n),t({type:T,payload:n})})):t({type:T,payload:a})}}()),e(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).force;return function(t,n){var a=n().users,c=void 0===a?[]:a;0===c.length||e?R().get().then((function(e){var n=e.docs.map((function(e){return e.data()}));t({type:g,payload:n})})):t({type:g,payload:c})}}())})),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(q,{}),Object(O.jsx)(p,{})]})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,255)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))},M=n(96),N={date:b()().valueOf()},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(u.a)(Object(u.a)({},e),t.payload);default:return e}},K=[],V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return[t.payload].concat(Object(s.a)(e));case T:return Object(s.a)(t.payload);default:return e}},W=[],X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(s.a)(t.payload);case m:return[].concat(Object(s.a)(e),[t.payload]);default:return e}},Q=n(151),Y=n(152),Z=Object(Y.createLogger)(),$=Object(M.c)(Object(M.b)({focusRecord:H,records:V,users:X}),Object(M.a)(Q.a,Z));r.a.render(Object(O.jsx)(o.a,{store:$,children:Object(O.jsx)(z,{})}),document.getElementById("root")),G()}},[[248,1,2]]]);
//# sourceMappingURL=main.8e413797.chunk.js.map